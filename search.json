[{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":null,"dir":"","previous_headings":"","what":"CLAUDE.md","title":"CLAUDE.md","text":"file provides guidance Claude Code (claude.ai/code) working code repository.","code":""},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"CLAUDE.md","text":"plumber2mcp R package adds Model Context Protocol (MCP) support Plumber APIs. transforms existing Plumber endpoints MCP tools AI assistants can discover call via JSON-RPC.","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"main-components","dir":"","previous_headings":"Core Architecture","what":"Main Components","title":"CLAUDE.md","text":"R/pr_mcp.R - Core implementation three key functions: - pr_mcp() - Main user-facing function adds MCP capabilities Plumber router - create_mcp_handler() - Creates JSON-RPC message handlers MCP protocol - extract_plumber_tools() - Converts Plumber endpoints MCP tool definitions Protocol Implementation: - HTTP transport layer (Plumber endpoints /mcp /mcp/messages) - JSON-RPC 2.0 protocol handlers initialize, tools/list, tools/call methods - Automatic endpoint discovery schema generation function signatures Transport Bridge: - inst/examples/stdio-wrapper.py - Python bridge converts stdio transport (expected MCP clients) HTTP calls - Handles Râ€™s jsonlite serialization quirks (single-element arrays, empty objects)","code":""},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"key-design-patterns","dir":"","previous_headings":"Core Architecture","what":"Key Design Patterns","title":"CLAUDE.md","text":"Endpoint Transformation: Plumber endpoints become MCP tools naming pattern {METHOD}__{path} (e.g., GET__echo, POST__add) Schema Generation: Function parameters automatically converted JSON Schema roxygen comment parsing descriptions Transport Abstraction: Core R implementation uses HTTP; stdio wrapper enables compatibility standard MCP clients","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"testing","dir":"","previous_headings":"Development Workflow","what":"Testing","title":"CLAUDE.md","text":"","code":"# Run all tests R -e \"devtools::test()\"  # Run specific test R -e \"testthat::test_file('tests/testthat/test-pr_mcp.R')\"  # Run with coverage R -e \"covr::package_coverage()\""},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"package-development","dir":"","previous_headings":"Development Workflow","what":"Package Development","title":"CLAUDE.md","text":"","code":"# Install dev version R -e \"devtools::install()\"  # Generate documentation R -e \"devtools::document()\"  # Check package R -e \"devtools::check()\""},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"testing-mcp-integration","dir":"","previous_headings":"Development Workflow","what":"Testing MCP Integration","title":"CLAUDE.md","text":"","code":"# Start example server R -e \"source('inst/examples/run_mcp_server.R')\"  # Test HTTP endpoints directly curl -X POST http://localhost:8000/mcp/messages \\   -H 'Content-Type: application/json' \\   -d '{\"jsonrpc\": \"2.0\", \"id\": 1, \"method\": \"tools/list\"}'  # Test with MCP client (requires stdio wrapper) cd inst/examples mcp-cli --config-file server_config.json tools"},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"json-rpc-protocol-flow","dir":"","previous_headings":"","what":"JSON-RPC Protocol Flow","title":"CLAUDE.md","text":"Initialize: Client sends initialize protocol version, receives server capabilities Tool Discovery: Client calls tools/list, receives array available tools schemas Tool Execution: Client calls tools/call tool name arguments, receives results","code":""},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"known-issues--workarounds","dir":"","previous_headings":"","what":"Known Issues & Workarounds","title":"CLAUDE.md","text":"R Serialization: jsonlite creates single-element arrays scalars. stdio wrapper (stdio-wrapper.py) handles conversions: - [\"2.0\"] â†’ \"2.0\" protocol fields - {} â†’ null empty id fields - Ensures content always array content items Transport Mismatch: R implementation uses HTTP, MCP clients expect stdio. Python wrapper bridges gap.","code":""},{"path":"https://armish.github.io/plumber2mcp/CLAUDE.html","id":"cicd","dir":"","previous_headings":"","what":"CI/CD","title":"CLAUDE.md","text":"GitHub Actions workflows: - R-CMD-check.yaml - Multi-platform R package testing - test-coverage.yaml - Code coverage reporting via Codecov","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"executive-summary","dir":"","previous_headings":"","what":"Executive Summary","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"analyzing competitive package mcptools (https://posit-dev.github.io/mcptools/), â€™ve identified several feature gaps , addressed, make plumber2mcp competitive feature-complete. document outlines key differences provides prioritized roadmap improvements.","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"current-plumber2mcp-features-","dir":"","previous_headings":"Feature Comparison","what":"Current plumber2mcp Features âœ“","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"MCP Server (HTTP & stdio transports) Tools: Auto-convert Plumber endpoints MCP tools Resources: Expose R documentation, data, analysis results Prompts: Reusable prompt templates Rich Schema Generation: Enhanced input/output schemas roxygen comments Security-focused: exposes pre-defined Plumber endpoints","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"present-in-mcptools-missing-in-plumber2mcp-ï¸","dir":"","previous_headings":"Feature Comparison > mcptools Features","what":"Present in mcptools, Missing in plumber2mcp âš ï¸","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"mcptools can act MCP client connect third-party MCP servers Allows integration external tools (GitHub, Confluence, Google Drive, etc.) Works ellmer library chat integration plumber2mcp currently acts server Package documentation browsing (dynamic) Global environment object inspection Session platform metadata retrieval plumber2mcp pr_mcp_help_resources() â€™s limited requires manual topic specification mcptools mcp_session() managing R sessions Routes requests active R sessions plumber2mcp doesnâ€™t session management concepts mcptools integrates shinychat, querychat, ellmer plumber2mcp standalone (necessarily gap - different design goals)","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"design-differences-not-gaps","dir":"","previous_headings":"Feature Comparison > mcptools Features","what":"Design Differences (Not Gaps)","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"mcptools can execute R code running sessions plumber2mcp exposes pre-defined Plumber endpoints intentional: plumber2mcp prioritizes security controlled API exposure Recommendation: Keep difference - â€™s feature, bug","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"phase-1-mcp-client-support-high-priority-","dir":"","previous_headings":"Improvement Roadmap","what":"Phase 1: MCP Client Support (HIGH PRIORITY) ðŸ”´","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Goal: Enable plumber2mcp act MCP client, allowing Plumber APIs integrate external MCP servers tools. New Functions: Use Cases: - Plumber API endpoints can call GitHub/Confluence/Drive MCP servers - AI assistants can orchestrate Plumber API external services - Combine local R computations external data sources Implementation Considerations: - Store client configurations pr$environment$mcp_clients - Implement JSON-RPC client communicate external MCP servers - Handle stdio HTTP transports external servers - Proper error handling timeout management - Optional: Create helper functions common MCP servers (GitHub, filesystem, etc.) Estimated Effort: 2-3 weeks","code":"# Register an external MCP server pr_mcp_client_add(   pr,   server_name = \"github\",   config = list(     command = \"npx\",     args = c(\"-y\", \"@modelcontextprotocol/server-github\"),     env = list(GITHUB_TOKEN = Sys.getenv(\"GITHUB_TOKEN\"))   ) )  # List registered MCP clients pr_mcp_clients(pr)  # Call a tool from a registered MCP client pr_mcp_client_call(   pr,   server = \"github\",   tool = \"search_repositories\",   arguments = list(query = \"plumber\") )"},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"phase-2-enhanced-built-in-tools-medium-priority-","dir":"","previous_headings":"Improvement Roadmap","what":"Phase 2: Enhanced Built-in Tools (MEDIUM PRIORITY) ðŸŸ¡","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Goal: Provide comprehensive set built-tools environment inspection, similar btw package. New Functions: Benefits: - AI assistants can explore R environment dynamically - Better understanding available packages functions - Self-documenting APIs - AI can discover capabilities --fly - Reduces manual resource definition Implementation Considerations: - optional (opt-via pr_mcp_builtin_tools()) - Respect security: expose global environment, internal plumber state - Provide filtering options (e.g., exclude certain objects) - Cache expensive operations appropriate - Format output AI-friendly markdown Estimated Effort: 2 weeks","code":"# Add all built-in inspection tools at once pr_mcp_builtin_tools(   pr,   include = c(\"env\", \"packages\", \"help\", \"session\", \"objects\", \"search\") )  # Or add them individually:  # List objects in global environment pr_mcp_tool_env_objects(pr) # Tool: GET__mcp_env_objects # Returns: list of objects with names, classes, sizes  # Inspect a specific object pr_mcp_tool_env_inspect(pr) # Tool: GET__mcp_env_inspect?name=mydata # Returns: str() output, summary(), dimensions, etc.  # Browse package documentation dynamically pr_mcp_tool_pkg_help(pr) # Tool: GET__mcp_pkg_help?topic=mean&package=base # Returns: formatted help text  # Search for functions across packages pr_mcp_tool_pkg_search(pr) # Tool: GET__mcp_pkg_search?pattern=linear # Returns: matching functions with packages  # Get comprehensive session info pr_mcp_tool_session_info(pr) # Tool: GET__mcp_session_info # Returns: R version, platform, loaded packages, capabilities  # Get workspace metadata pr_mcp_tool_workspace_info(pr) # Tool: GET__mcp_workspace_info # Returns: memory usage, object counts, search path"},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"phase-3-advanced-resource-templates-medium-priority-","dir":"","previous_headings":"Improvement Roadmap","what":"Phase 3: Advanced Resource Templates (MEDIUM PRIORITY) ðŸŸ¡","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Goal: Support URI templates dynamic resources, mentioned MCP spec yet implemented. New Capability: Benefits: - flexible resource exposure - Reduce boilerplate similar resources - Better align MCP specification - AI can construct URIs dynamically Implementation Considerations: - Implement URI template parsing (RFC 6570) - Add handle_resources_templates() - Support HTTP stdio transports - Validate parameters executing functions Estimated Effort: 1 week","code":"# Define a resource template with URI parameters pr_mcp_resource_template(   pr,   uri_template = \"/help/{topic}\",   func = function(topic) {     # topic is extracted from URI     capture.output(help(topic))   },   name = \"R Help for Any Topic\",   description = \"Get R documentation for any help topic\" )  # Example template for datasets pr_mcp_resource_template(   pr,   uri_template = \"/data/{dataset}/summary\",   func = function(dataset) {     data <- get(dataset, envir = .GlobalEnv)     capture.output(summary(data))   },   name = \"Dataset Summary\",   description = \"Get summary statistics for any dataset in the environment\" )"},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"phase-4-performance--scalability-medium-priority-","dir":"","previous_headings":"Improvement Roadmap","what":"Phase 4: Performance & Scalability (MEDIUM PRIORITY) ðŸŸ¡","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Goal: Improve performance large-scale deployments. Improvements: Caching Layer Async Tool Execution Rate Limiting Streaming Responses Estimated Effort: 2-3 weeks","code":"pr_mcp(   pr,   transport = \"http\",   cache = list(     tools = TRUE,           # Cache tools list     resources = TRUE,       # Cache resource responses     ttl = 300,             # Cache TTL in seconds     max_size = \"100MB\"     # Max cache size   ) ) # Allow long-running tools to execute asynchronously pr_mcp_tool_async(pr, \"/long-computation\", timeout = 300) pr_mcp(   pr,   transport = \"http\",   rate_limit = list(     requests_per_minute = 60,     per_tool_limit = TRUE   ) ) # Support streaming for large resources pr_mcp_resource(   pr,   uri = \"/data/large-dataset\",   func = function() { ... },   streaming = TRUE )"},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"phase-5-enhanced-documentation--discovery-low-priority-","dir":"","previous_headings":"Improvement Roadmap","what":"Phase 5: Enhanced Documentation & Discovery (LOW PRIORITY) ðŸŸ¢","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Goal: Make easier AI assistants understand use API. Improvements: OpenAPI/Swagger Integration Enhanced Tool Categorization Example Requests Estimated Effort: 1-2 weeks","code":"pr_mcp(   pr,   transport = \"http\",   openapi = TRUE,  # Auto-generate OpenAPI spec from MCP tools   openapi_path = \"/openapi.json\" ) pr_mcp_tool_category(   pr,   category = \"data-analysis\",   tools = c(\"POST__analyze\", \"GET__summary\"),   description = \"Tools for statistical analysis\" ) # Add examples to tool definitions pr_mcp_tool_example(   pr,   tool = \"POST__analyze\",   example = list(     name = \"Analyze mtcars MPG\",     arguments = list(       data = \"mtcars$mpg\",       method = \"summary\"     ),     expected_result = list(       mean = 20.09,       median = 19.2     )   ) )"},{"path":[]},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"immediate-next-4-weeks","dir":"","previous_headings":"Implementation Plan","what":"Immediate (Next 4 weeks)","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"âœ… Complete feature gap analysis ðŸ”² Design MCP client architecture ðŸ”² Implement basic MCP client functionality ðŸ”² Add tests client mode","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"short-term-2-3-months","dir":"","previous_headings":"Implementation Plan","what":"Short-term (2-3 months)","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"ðŸ”² Complete MCP client stdio & HTTP support ðŸ”² Implement built-environment inspection tools ðŸ”² Add comprehensive documentation ðŸ”² Create example integrations (GitHub MCP server, etc.)","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"medium-term-3-6-months","dir":"","previous_headings":"Implementation Plan","what":"Medium-term (3-6 months)","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"ðŸ”² Implement resource templates ðŸ”² Add caching layer ðŸ”² Performance optimizations ðŸ”² Rate limiting support","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"long-term-6-months","dir":"","previous_headings":"Implementation Plan","what":"Long-term (6+ months)","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"ðŸ”² Streaming support ðŸ”² OpenAPI integration ðŸ”² Advanced tool categorization ðŸ”² Plugin system custom transports","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"success-metrics","dir":"","previous_headings":"","what":"Success Metrics","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Feature Parity: Cover 80%+ mcptools functionality (applicable) Performance: Tools list generation < 100ms 50 endpoints Adoption: Used 3+ production projects Documentation: 100% new features documented examples Testing: 90%+ code coverage new features","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"questions--considerations","dir":"","previous_headings":"","what":"Questions & Considerations","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Recommendation: Keep server-focused, add client optional feature Recommendation: Use environment variables, support config files Recommendation: Yes, new features opt-Recommendation: Keep client features separate optional module Recommendation: Mock MCP servers testing, provide example servers","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"next-steps","dir":"","previous_headings":"","what":"Next Steps","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"Review plan maintainers community Create GitHub issues phase Seek feedback API design new functions Start Phase 1 implementation Update CLAUDE.md new architecture Phase 1 complete","code":""},{"path":"https://armish.github.io/plumber2mcp/IMPROVEMENT_PLAN.html","id":"references","dir":"","previous_headings":"","what":"References","title":"plumber2mcp vs mcptools: Feature Comparison & Improvement Plan","text":"mcptools: https://posit-dev.github.io/mcptools/ btw package: https://github.com/posit-dev/btw MCP Specification: https://modelcontextprotocol.io/ ellmer: https://ellmer.tidyverse.org/","code":""},{"path":"https://armish.github.io/plumber2mcp/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Bulent Arman Aksoy Permission hereby granted, free charge, person obtaining copy software associated documentation files (â€œSoftwareâ€), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED â€œâ€, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting Started with plumber2mcp","text":"Model Context Protocol (MCP) standard protocol enables AI assistants (like Claude, ChatGPT, etc.) interact external tools services. plumber2mcp package makes incredibly easy add MCP support existing Plumber APIs just single function call. adding MCP support, R functions become available AI assistants : Tools: AI assistants can call API endpoints directly Resources: AI assistants can read documentation, data, analysis results Prompts: AI assistants can use pre-defined templates guide interactions","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"basic-example","dir":"Articles","previous_headings":"Quick Start","what":"Basic Example","title":"Getting Started with plumber2mcp","text":"Letâ€™s create simple Plumber API add MCP support: â€™s ! API now : - Regular HTTP endpoints http://localhost:8000/ - MCP server http://localhost:8000/mcp","code":"# Create a simple plumber API file library(plumber) library(plumber2mcp)  # Define your API pr <- plumb(text = ' #* Echo back the input #* @param msg The message to echo #* @get /echo function(msg = \"Hello World\") {   list(message = paste(\"Echo:\", msg)) }  #* Add two numbers #* @param a First number #* @param b Second number #* @post /add function(a, b) {   list(result = as.numeric(a) + as.numeric(b)) } ')  # Add MCP support with HTTP transport pr %>%   pr_mcp(transport = \"http\") %>%   pr_run(port = 8000)"},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"http-transport-default","dir":"Articles","previous_headings":"Transport Options","what":"HTTP Transport (Default)","title":"Getting Started with plumber2mcp","text":"HTTP transport great testing want run traditional web server: MCP endpoints now available : - GET /mcp - Server information - POST /mcp/messages - JSON-RPC message handler","code":"pr(\"api.R\") %>%   pr_mcp(transport = \"http\") %>%   pr_run(port = 8000)"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"stdio-transport-native-mcp","dir":"Articles","previous_headings":"Transport Options","what":"Stdio Transport (Native MCP)","title":"Getting Started with plumber2mcp","text":"native MCP client compatibility (mcp-cli, Claude Desktop, etc.), use stdio transport: starts server communicates standard input/output using MCP protocol.","code":"pr(\"api.R\") %>%   pr_mcp(transport = \"stdio\")"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"using-with-mcp-cli","dir":"Articles","previous_headings":"Transport Options > Stdio Transport (Native MCP)","what":"Using with mcp-cli","title":"Getting Started with plumber2mcp","text":"Create server_config.json file: test:","code":"{   \"mcpServers\": {     \"my-r-api\": {       \"command\": \"Rscript\",       \"args\": [\"-e\", \"plumber::pr('api.R') %>% plumber2mcp::pr_mcp(transport='stdio')\"]     }   } } mcp-cli tools              # List available tools mcp-cli cmd --tool GET__echo --tool-args '{\"msg\": \"Hello!\"}'"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"enhanced-documentation","dir":"Articles","previous_headings":"","what":"Enhanced Documentation","title":"Getting Started with plumber2mcp","text":"One powerful features plumber2mcp automatic schema generation. document endpoints roxygen comments, package creates rich, detailed tool descriptions help AI assistants understand use APIs effectively.","code":""},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"basic-documentation","dir":"Articles","previous_headings":"Enhanced Documentation","what":"Basic Documentation","title":"Getting Started with plumber2mcp","text":"creates MCP tool : - Full parameter descriptions - Type information (string, bool, number) - Default values - Required vs optional parameters","code":"#* Calculate statistics on numeric data #* #* @param numbers Numeric vector of values #* @param operation:string Operation to perform: \"mean\", \"median\", \"sum\", \"sd\" #* @param na_rm:bool Remove NA values (default: TRUE) #* @post /stats function(numbers, operation = \"mean\", na_rm = TRUE) {   if (is.character(numbers)) {     numbers <- as.numeric(strsplit(numbers, \",\")[[1]])   }    result <- switch(operation,     \"mean\" = mean(numbers, na.rm = na_rm),     \"median\" = median(numbers, na.rm = na_rm),     \"sum\" = sum(numbers, na.rm = na_rm),     \"sd\" = sd(numbers, na.rm = na_rm),     stop(\"Unknown operation\")   )    list(result = result, operation = operation) }"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"type-annotations","dir":"Articles","previous_headings":"Enhanced Documentation","what":"Type Annotations","title":"Getting Started with plumber2mcp","text":"Use plumber type annotations precise type information: :bool :logical â†’ boolean :int :integer â†’ integer :number :numeric â†’ number :string :character â†’ string :array â†’ array","code":""},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"working-with-resources","dir":"Articles","previous_headings":"","what":"Working with Resources","title":"Getting Started with plumber2mcp","text":"Resources allow AI assistants read content R environment, documentation, data descriptions, analysis results.","code":""},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"adding-custom-resources","dir":"Articles","previous_headings":"Working with Resources","what":"Adding Custom Resources","title":"Getting Started with plumber2mcp","text":"","code":"pr(\"api.R\") %>%   pr_mcp(transport = \"stdio\") %>%    # Add dataset information   pr_mcp_resource(     uri = \"/data/iris-summary\",     name = \"Iris Dataset Summary\",     description = \"Statistical summary of the iris dataset\",     func = function() {       paste(         \"Dataset: iris\",         paste(\"Dimensions:\", paste(dim(iris), collapse = \" x \")),         \"\",         capture.output(summary(iris)),         sep = \"\\n\"       )     }   ) %>%    # Add memory usage info   pr_mcp_resource(     uri = \"/system/memory\",     name = \"R Memory Usage\",     description = \"Current R session memory statistics\",     func = function() {       mem <- gc()       paste(         \"R Memory Usage:\",         paste(\"Used (Mb):\", round(sum(mem[,2]), 2)),         sep = \"\\n\"       )     }   )"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"built-in-help-resources","dir":"Articles","previous_headings":"Working with Resources","what":"Built-in Help Resources","title":"Getting Started with plumber2mcp","text":"Quickly add R help documentation: adds resources : - R help topics (/help/mean, /help/lm) - Session information (/r/session-info) - Installed packages (/r/packages)","code":"pr(\"api.R\") %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_help_resources()"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"working-with-prompts","dir":"Articles","previous_headings":"","what":"Working with Prompts","title":"Getting Started with plumber2mcp","text":"Prompts reusable templates guide AI assistants interacting API.","code":""},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"simple-prompts","dir":"Articles","previous_headings":"Working with Prompts","what":"Simple Prompts","title":"Getting Started with plumber2mcp","text":"","code":"pr(\"api.R\") %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"r-help\",     description = \"Get help with R programming\",     func = function() {       paste(         \"I need help with R programming.\",         \"Please provide guidance on best practices.\",         sep = \"\\n\"       )     }   )"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"prompts-with-arguments","dir":"Articles","previous_headings":"Working with Prompts","what":"Prompts with Arguments","title":"Getting Started with plumber2mcp","text":"","code":"pr(\"api.R\") %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"analyze-dataset\",     description = \"Generate analysis plan for a dataset\",     arguments = list(       list(         name = \"dataset\",         description = \"Name of the R dataset to analyze\",         required = TRUE       ),       list(         name = \"focus\",         description = \"Specific aspect to focus on\",         required = FALSE       )     ),     func = function(dataset, focus = \"general\") {       sprintf(         paste(           \"Please analyze the %s dataset in R.\",           \"Focus: %s\",           \"\",           \"Provide:\",           \"1. Summary statistics\",           \"2. Data quality assessment\",           \"3. Key insights\",           sep = \"\\n\"         ),         dataset, focus       )     }   )"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"multi-turn-conversation-prompts","dir":"Articles","previous_headings":"Working with Prompts","what":"Multi-turn Conversation Prompts","title":"Getting Started with plumber2mcp","text":"","code":"pr(\"api.R\") %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"code-review\",     description = \"Review R code for quality\",     arguments = list(       list(name = \"code\", description = \"R code to review\", required = TRUE)     ),     func = function(code) {       list(         list(           role = \"user\",           content = list(type = \"text\", text = paste(\"Review this R code:\", code, sep = \"\\n\"))         ),         list(           role = \"assistant\",           content = list(type = \"text\", text = \"I'll review your code for correctness and style.\")         ),         list(           role = \"user\",           content = list(type = \"text\", text = \"Please provide specific suggestions.\")         )       )     }   )"},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"filtering-endpoints","dir":"Articles","previous_headings":"Advanced Configuration","what":"Filtering Endpoints","title":"Getting Started with plumber2mcp","text":"Include specific endpoints: Exclude specific endpoints:","code":"pr(\"api.R\") %>%   pr_mcp(     transport = \"http\",     include_endpoints = c(\"GET__echo\", \"POST__add\")   ) %>%   pr_run(port = 8000) pr(\"api.R\") %>%   pr_mcp(     transport = \"stdio\",     exclude_endpoints = c(\"POST__internal\")   )"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"custom-server-information","dir":"Articles","previous_headings":"Advanced Configuration","what":"Custom Server Information","title":"Getting Started with plumber2mcp","text":"","code":"pr(\"api.R\") %>%   pr_mcp(     transport = \"http\",     server_name = \"my-stats-api\",     server_version = \"1.0.0\"   ) %>%   pr_run(port = 8000)"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"custom-mcp-path","dir":"Articles","previous_headings":"Advanced Configuration","what":"Custom MCP Path","title":"Getting Started with plumber2mcp","text":"Now MCP endpoints /-mcp-server instead /mcp.","code":"pr(\"api.R\") %>%   pr_mcp(     transport = \"http\",     path = \"/my-mcp-server\"   ) %>%   pr_run(port = 8000)"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"complete-example","dir":"Articles","previous_headings":"","what":"Complete Example","title":"Getting Started with plumber2mcp","text":"â€™s comprehensive example bringing together:","code":"library(plumber) library(plumber2mcp)  # Create the API pr <- plumb(text = ' #* @apiTitle Statistical Analysis API #* @apiDescription MCP-enabled API for statistical operations  #* Calculate descriptive statistics #* @param values:string Comma-separated numeric values #* @param stats:string Statistics to compute: \"all\", \"mean\", \"median\", \"sd\" #* @post /describe function(values, stats = \"all\") {   nums <- as.numeric(strsplit(values, \",\")[[1]])    result <- list()   if (stats %in% c(\"all\", \"mean\")) result$mean <- mean(nums, na.rm = TRUE)   if (stats %in% c(\"all\", \"median\")) result$median <- median(nums, na.rm = TRUE)   if (stats %in% c(\"all\", \"sd\")) result$sd <- sd(nums, na.rm = TRUE)    result }  #* Perform t-test #* @param group1:string Comma-separated values for group 1 #* @param group2:string Comma-separated values for group 2 #* @param paired:bool Whether to perform paired t-test #* @post /ttest function(group1, group2, paired = FALSE) {   g1 <- as.numeric(strsplit(group1, \",\")[[1]])   g2 <- as.numeric(strsplit(group2, \",\")[[1]])    test <- t.test(g1, g2, paired = paired)    list(     statistic = test$statistic,     p_value = test$p.value,     conf_int = test$conf.int,     method = test$method   ) } ')  # Add MCP capabilities pr %>%   pr_mcp(     transport = \"stdio\",     server_name = \"stats-api\",     server_version = \"1.0.0\"   ) %>%    # Add resource for available datasets   pr_mcp_resource(     uri = \"/info/datasets\",     name = \"Available Datasets\",     description = \"List of R datasets available for analysis\",     func = function() {       datasets <- data(package = \"datasets\")$results[, c(\"Item\", \"Title\")]       paste(apply(datasets, 1, paste, collapse = \": \"), collapse = \"\\n\")     }   ) %>%    # Add analysis prompt   pr_mcp_prompt(     name = \"statistical-analysis\",     description = \"Guide for statistical analysis workflow\",     arguments = list(       list(name = \"question\", description = \"Research question\", required = TRUE)     ),     func = function(question) {       sprintf(         \"Research Question: %s\\n\\nHelp me:\\n1. Choose appropriate test\\n2. Check assumptions\\n3. Interpret results\",         question       )     }   )"},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"direct-http-testing","dir":"Articles","previous_headings":"Testing Your MCP Server","what":"Direct HTTP Testing","title":"Getting Started with plumber2mcp","text":"HTTP transport, test curl:","code":"# List tools curl -X POST http://localhost:8000/mcp/messages \\   -H 'Content-Type: application/json' \\   -d '{\"jsonrpc\": \"2.0\", \"id\": 1, \"method\": \"tools/list\"}'  # Call a tool curl -X POST http://localhost:8000/mcp/messages \\   -H 'Content-Type: application/json' \\   -d '{\"jsonrpc\": \"2.0\", \"id\": 2, \"method\": \"tools/call\",        \"params\": {\"name\": \"GET__echo\", \"arguments\": {\"msg\": \"Hello!\"}}}'"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"using-mcp-inspector","dir":"Articles","previous_headings":"Testing Your MCP Server","what":"Using MCP Inspector","title":"Getting Started with plumber2mcp","text":"transports, use MCP Inspector interactive testing:","code":"# For stdio transport cd inst/examples mcp-inspector --config stdio_config.json --server plumber2mcp  # For HTTP transport mcp-inspector --config http_wrapper_config.json --server plumber2mcp"},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"document-everything","dir":"Articles","previous_headings":"Best Practices","what":"1. Document Everything","title":"Getting Started with plumber2mcp","text":"Use roxygen comments extensively:","code":"#* Calculate correlation between two variables #* #* This endpoint computes Pearson or Spearman correlation #* and provides confidence intervals and p-values. #* #* @param x:string Comma-separated numeric values for variable X #* @param y:string Comma-separated numeric values for variable Y #* @param method:string Correlation method: \"pearson\" or \"spearman\" (default: \"pearson\") #* @param conf_level:number Confidence level for intervals (default: 0.95) #* @post /correlate function(x, y, method = \"pearson\", conf_level = 0.95) {   # Implementation... }"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"provide-meaningful-defaults","dir":"Articles","previous_headings":"Best Practices","what":"2. Provide Meaningful Defaults","title":"Getting Started with plumber2mcp","text":"Default values appear schema help AI assistants:","code":"function(data, method = \"lm\", alpha = 0.05, max_iter = 1000) {   # Defaults make it easy for AI to call with minimal parameters }"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"return-structured-data","dir":"Articles","previous_headings":"Best Practices","what":"3. Return Structured Data","title":"Getting Started with plumber2mcp","text":"Always return lists named elements:","code":"function(x) {   list(     result = mean(x),     n = length(x),     valid_n = sum(!is.na(x)),     timestamp = Sys.time()   ) }"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"add-resources-for-context","dir":"Articles","previous_headings":"Best Practices","what":"4. Add Resources for Context","title":"Getting Started with plumber2mcp","text":"Help AI assistants understand data:","code":"pr %>%   pr_mcp_resource(     uri = \"/data/schema\",     name = \"Data Schema\",     description = \"Schema and description of available datasets\",     func = function() {       # Return schema information     }   )"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"use-prompts-for-workflows","dir":"Articles","previous_headings":"Best Practices","what":"5. Use Prompts for Workflows","title":"Getting Started with plumber2mcp","text":"Guide AI complex multi-step processes:","code":"pr %>%   pr_mcp_prompt(     name = \"full-analysis\",     description = \"Complete data analysis workflow\",     func = function() {       paste(         \"Guide me through:\",         \"1. Data exploration\",         \"2. Statistical testing\",         \"3. Visualization\",         \"4. Interpretation\",         sep = \"\\n\"       )     }   )"},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Getting Started with plumber2mcp","text":"Explore package documentation Check example APIs inst/examples/ Read Model Context Protocol Try integrating Claude Desktop MCP clients","code":""},{"path":"https://armish.github.io/plumber2mcp/articles/getting-started.html","id":"getting-help","dir":"Articles","previous_headings":"","what":"Getting Help","title":"Getting Started with plumber2mcp","text":"GitHub Issues: https://github.com/armish/plumber2mcp/issues Package documentation: ?pr_mcp Examples: system.file(\"examples\", package = \"plumber2mcp\")","code":""},{"path":"https://armish.github.io/plumber2mcp/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Bulent Arman Aksoy. Author, maintainer.","code":""},{"path":"https://armish.github.io/plumber2mcp/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Aksoy B (2025). plumber2mcp: Add Model Context Protocol Support Plumber APIs. R package version 0.4.0.","code":"@Manual{,   title = {plumber2mcp: Add Model Context Protocol Support to Plumber APIs},   author = {Bulent Arman Aksoy},   year = {2025},   note = {R package version 0.4.0}, }"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"plumber2mcp","dir":"","previous_headings":"","what":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Add Model Context Protocol (MCP) support Plumber APIs single function call.","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"what-is-mcp","dir":"","previous_headings":"","what":"What is MCP?","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Model Context Protocol (MCP) standard protocol enables AI assistants (like Claude, ChatGPT, etc.) interact external tools services. adding MCP support Plumber API, make R functions available : Tools: AI assistants can call API endpoints directly Resources: AI assistants can read documentation, data, analysis results Prompts: AI assistants can use pre-defined templates guide interactions","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"","code":"# Install from GitHub remotes::install_github(\"armish/plumber2mcp\")"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"dependencies","dir":"","previous_headings":"Installation","what":"Dependencies","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"package requires: - R (>= 4.0.0) - plumber (>= 1.0.0) - jsonlite - httr","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"http-transport-default","dir":"","previous_headings":"Quick Start","what":"HTTP Transport (Default)","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"API now : - Regular HTTP endpoints http://localhost:8000/ - MCP server http://localhost:8000/mcp","code":"library(plumber) library(plumber2mcp)  # Create and run a Plumber API with MCP support via HTTP pr(\"plumber.R\") %>%   pr_mcp(transport = \"http\") %>%   pr_run(port = 8000)"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"stdio-transport-native-mcp","dir":"","previous_headings":"Quick Start","what":"Stdio Transport (Native MCP)","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Use mcp-cli MCP clients: Create server_config.json file: Test connection:","code":"library(plumber) library(plumber2mcp)  # Create and run a Plumber API with native stdio transport pr(\"plumber.R\") %>%   pr_mcp(transport = \"stdio\") {   \"mcpServers\": {     \"plumber2mcp\": {       \"command\": \"Rscript\",       \"args\": [\"-e\", \"plumber::pr('api.R') %>% plumber2mcp::pr_mcp(transport='stdio')\"],       \"cwd\": \".\"     }   } } mcp-cli servers  # Should show your server as \"Ready\" mcp-cli tools    # List available tools mcp-cli cmd --tool GET__echo --tool-args '{\"msg\": \"Hello!\"}'  # Call a tool"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"how-it-works","dir":"","previous_headings":"","what":"How It Works","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"pr_mcp() function automatically: Discovers endpoints: Scans endpoints Plumber API Creates MCP tools: Converts endpoint MCP tool proper schema Adds MCP endpoints: Adds necessary MCP protocol endpoints Handles JSON-RPC: Manages MCP communication via JSON-RPC Supports resources: Allows AI assistants read documentation data R environment Supports prompts: Exposes reusable prompt templates guide AI interactions Generates rich schemas: Creates detailed input/output schemas documentation roxygen comments","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"enhanced-documentation--schema-generation","dir":"","previous_headings":"","what":"Enhanced Documentation & Schema Generation","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"plumber2mcp automatically generates rich JSON schemas detailed documentation API endpoints analyzing roxygen comments function signatures. feature, inspired FastAPI-MCP, makes R APIs much usable AI assistants.","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"rich-tool-descriptions","dir":"","previous_headings":"Enhanced Documentation & Schema Generation","what":"Rich Tool Descriptions","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"document endpoints roxygen comments, plumber2mcp creates comprehensive tool descriptions: creates MCP tool : Enhanced Description: Input Schema: Output Schema:","code":"#* Calculate statistical operations on numeric data #*  #* This endpoint performs various statistical calculations on a vector of numbers. #* It supports multiple operations and handles missing values. #*  #* @param numbers Numeric vector of values to calculate statistics for #* @param operation Statistical operation to perform: \"mean\", \"median\", \"sum\", \"sd\" (default: \"mean\") #* @param na_rm:bool Logical value indicating whether to remove NA values (default: TRUE) #* @param digits:int Number of decimal places to round the result (default: 2) #* @return List containing the calculated result and metadata #* @post /calculate function(numbers, operation = \"mean\", na_rm = TRUE, digits = 2) {   # Convert input to numeric   if (is.character(numbers)) {     numbers <- as.numeric(strsplit(numbers, \",\")[[1]])   } else {     numbers <- as.numeric(numbers)   }      result <- switch(operation,     \"mean\" = mean(numbers, na.rm = na_rm),     \"median\" = median(numbers, na.rm = na_rm),     \"sum\" = sum(numbers, na.rm = na_rm),     \"sd\" = sd(numbers, na.rm = na_rm),     stop(\"Unknown operation: \", operation)   )      list(     result = round(result, digits),     operation = operation,     count = length(numbers[!is.na(numbers)]),     input_length = length(numbers)   ) } Calculate statistical operations on numeric data  This endpoint performs various statistical calculations on a vector of numbers. It supports multiple operations and handles missing values.  Parameters: - numbers (string): Numeric vector of values to calculate statistics for - operation (string) [default: mean]: Statistical operation to perform: \"mean\", \"median\", \"sum\", \"sd\" - na_rm (boolean) [default: TRUE]: Logical value indicating whether to remove NA values - digits (integer) [default: 2]: Number of decimal places to round the result  HTTP Method: POST Path: /calculate {   \"type\": \"object\",   \"properties\": {     \"numbers\": {       \"type\": \"string\",       \"description\": \"Numeric vector of values to calculate statistics for\"     },     \"operation\": {       \"type\": \"string\",       \"description\": \"Statistical operation to perform: \\\"mean\\\", \\\"median\\\", \\\"sum\\\", \\\"sd\\\"\",       \"default\": \"mean\"     },     \"na_rm\": {       \"type\": \"boolean\",       \"description\": \"Logical value indicating whether to remove NA values\",       \"default\": true     },     \"digits\": {       \"type\": \"integer\",       \"description\": \"Number of decimal places to round the result\",       \"default\": 2     }   },   \"required\": [\"numbers\"] } {   \"type\": \"object\",   \"description\": \"Structured response object\",   \"properties\": {     \"result\": {       \"type\": \"number\",       \"description\": \"Response field: result\"     },     \"operation\": {       \"type\": \"string\",       \"description\": \"Response field: operation\"     },     \"count\": {       \"type\": \"number\",       \"description\": \"Response field: count\"     },     \"input_length\": {       \"type\": \"number\",       \"description\": \"Response field: input_length\"     }   } }"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"type-detection-and-schema-features","dir":"","previous_headings":"Enhanced Documentation & Schema Generation","what":"Type Detection and Schema Features","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Smart Type Mapping: Automatically maps R types JSON Schema types: logical â†’ boolean integer â†’ integer numeric/double â†’ number character â†’ string supports plumber type annotations like :bool, :int, :array Default Value Detection: Extracts default values function signatures includes schemas Required vs Optional Parameters: Automatically determines parameters required based whether default values Output Schema Generation: Analyzes functionâ€™s return statements automatically generate response schemas Rich Parameter Documentation: Extracts parameter descriptions roxygen @param tags","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"why-this-matters-for-ai-assistants","dir":"","previous_headings":"Enhanced Documentation & Schema Generation","what":"Why This Matters for AI Assistants","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"enhanced schemas, AI assistants can: Better understand APIs: Rich descriptions help AI assistants understand endpoint Provide better suggestions: Detailed parameter information helps AI assistants suggest appropriate values Generate better code: Output schemas help AI assistants understand expect API Reduce errors: Type information required/optional parameter detection reduces API call mistakes Self-document: API becomes self-documenting humans AI","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"example-ai-assistant-interaction","dir":"","previous_headings":"Enhanced Documentation & Schema Generation","what":"Example AI Assistant Interaction","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Without enhanced schemas: enhanced schemas:","code":"User: \"Can you help me calculate the mean of some numbers using this API?\" AI: \"I can see there's a calculate endpoint, but I'm not sure what parameters it needs...\" User: \"Can you help me calculate the mean of some numbers using this API?\" AI: \"I can see you have a calculate endpoint that performs statistical operations!      It needs a 'numbers' parameter (required) and optionally 'operation' (defaults to 'mean'),      'na_rm' (defaults to TRUE), and 'digits' (defaults to 2).       Let me call it for you:      POST /calculate with {\"numbers\": \"1,2,3,4,5\"}       This will return an object with the result, operation used, count of valid numbers,      and input length.\""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"best-practices-for-documentation","dir":"","previous_headings":"Enhanced Documentation & Schema Generation","what":"Best Practices for Documentation","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"get enhanced schema generation: Use descriptive roxygen comments: Write clear titles descriptions Document parameters: Use @param tags clear descriptions Specify types helpful: Use :bool, :int, :array annotations clarity Provide meaningful default values: Default values appear schema Use consistent return structures: Return lists named elements better output schemas Include examples descriptions: Help AI assistants understand expected formats","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"mcp-endpoints","dir":"","previous_headings":"","what":"MCP Endpoints","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"pr_mcp() applied, API exposes: GET /mcp - Server information capabilities POST /mcp/messages - JSON-RPC message handler MCP protocol","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Given simple Plumber API: endpoints become rich MCP tools full schemas: - GET__echo - Echo back message intelligent default handling - POST__add - Add two numbers configurable precision structured output enhanced documentation provides AI assistants detailed information parameter types, defaults, descriptions, expected response formats.","code":"#* Echo back the input #*  #* Simple endpoint that echoes back whatever message you send it #*  #* @param msg:string The message to echo back (default: \"Hello World\") #* @get /echo function(msg = \"Hello World\") {   list(message = paste(\"Echo:\", msg)) }  #* Add two numbers together #*  #* Performs arithmetic addition on two numeric values #*  #* @param a:number First number to add #* @param b:number Second number to add   #* @param precision:int Number of decimal places to round result (default: 2) #* @post /add function(a, b, precision = 2) {   result <- as.numeric(a) + as.numeric(b)   list(     result = round(result, precision),     operation = \"addition\",     inputs = c(a, b)   ) }"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"prompts-support","dir":"","previous_headings":"","what":"Prompts Support","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Prompts reusable templates AI assistants can discover use interact API. provide structured guidance common tasks workflows.","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"what-are-prompts","dir":"","previous_headings":"Prompts Support","what":"What are Prompts?","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Prompts MCP pre-defined message templates : - Help AI assistants understand use API effectively - Provide structured guidance complex workflows - Can accept arguments customize prompt content - Support multi-turn conversations","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"adding-prompts","dir":"","previous_headings":"Prompts Support","what":"Adding Prompts","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"","code":"# Simple prompt with no arguments pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"r-help\",     description = \"Get help with R programming\",     func = function() {       paste(         \"I need help with R programming.\",         \"Please provide guidance on best practices and common patterns.\",         sep = \"\\n\"       )     }   )  # Prompt with arguments pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"analyze-dataset\",     description = \"Generate a comprehensive analysis plan for an R dataset\",     arguments = list(       list(         name = \"dataset\",         description = \"Name of the R dataset to analyze\",         required = TRUE       ),       list(         name = \"focus\",         description = \"Specific aspect to focus on\",         required = FALSE       )     ),     func = function(dataset, focus = \"general\") {       sprintf(         paste(           \"Please analyze the %s dataset in R.\",           \"Focus: %s\",           \"\",           \"Provide:\",           \"1. Summary statistics\",           \"2. Data quality assessment\",           \"3. Key insights\",           sep = \"\\n\"         ),         dataset, focus       )     }   )  # Multi-turn conversation prompt pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"code-review\",     description = \"Review R code for quality and best practices\",     arguments = list(       list(name = \"code\", description = \"The R code to review\", required = TRUE)     ),     func = function(code) {       list(         list(           role = \"user\",           content = list(             type = \"text\",             text = paste(\"Please review this R code:\", code, sep = \"\\n\\n\")           )         ),         list(           role = \"assistant\",           content = list(             type = \"text\",             text = \"I'll review your code for correctness, performance, and style.\"           )         ),         list(           role = \"user\",           content = list(             type = \"text\",             text = \"Please provide specific suggestions for improvement.\"           )         )       )     }   )"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"prompt-message-formats","dir":"","previous_headings":"Prompts Support","what":"Prompt Message Formats","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"prompt function can return messages several formats: Simple String - Automatically converted user message: Structured Message - Full control role content: Multiple Messages - multi-turn conversations:","code":"func = function() \"Hello World\" func = function() {   list(     role = \"user\",     content = list(type = \"text\", text = \"Your message\")   ) } func = function() {   list(     list(role = \"user\", content = list(type = \"text\", text = \"First message\")),     list(role = \"assistant\", content = list(type = \"text\", text = \"Second message\"))   ) }"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"use-cases-for-prompts","dir":"","previous_headings":"Prompts Support","what":"Use Cases for Prompts","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Workflow Guidance Code Generation Templates Domain-Specific Assistance","code":"pr_mcp_prompt(   pr,   name = \"data-pipeline\",   description = \"Guide for building data processing pipelines\",   arguments = list(     list(name = \"data_type\", description = \"Type of data to process\", required = TRUE)   ),   func = function(data_type) {     sprintf(\"Create a data processing pipeline for %s data...\", data_type)   } ) pr_mcp_prompt(   pr,   name = \"create-endpoint\",   description = \"Template for creating new Plumber endpoints\",   func = function() {     paste(       \"Generate a Plumber endpoint with:\",       \"1. Proper roxygen documentation\",       \"2. Input validation\",       \"3. Error handling\",       \"4. Example usage\",       sep = \"\\n\"     )   } ) pr_mcp_prompt(   pr,   name = \"statistical-test\",   description = \"Choose and implement appropriate statistical tests\",   arguments = list(     list(name = \"research_question\", description = \"Research question\", required = TRUE)   ),   func = function(research_question) {     sprintf(       paste(         \"Research Question: %s\",         \"\",         \"Help me:\",         \"1. Choose the appropriate statistical test\",         \"2. Check assumptions\",         \"3. Implement in R\",         \"4. Interpret results\",         sep = \"\\n\"       ),       research_question     )   } )"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"example-complete-setup-with-prompts","dir":"","previous_headings":"Prompts Support","what":"Example: Complete Setup with Prompts","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"","code":"library(plumber) library(plumber2mcp)  pr(\"api.R\") %>%   pr_mcp(transport = \"stdio\") %>%    # Add analysis prompt   pr_mcp_prompt(     name = \"analyze\",     description = \"Analyze data from the API\",     func = function() {       \"Guide me through analyzing the data available from this API.\"     }   ) %>%    # Add troubleshooting prompt   pr_mcp_prompt(     name = \"troubleshoot\",     description = \"Help troubleshoot API issues\",     arguments = list(       list(name = \"issue\", description = \"Description of the issue\", required = TRUE)     ),     func = function(issue) {       sprintf(\"I'm experiencing this issue with the API: %s\\n\\nHow can I resolve it?\", issue)     }   )"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"resources-support","dir":"","previous_headings":"","what":"Resources Support","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Resources allow AI assistants read content R environment, documentation, data descriptions, analysis results.","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"adding-custom-resources","dir":"","previous_headings":"Resources Support","what":"Adding Custom Resources","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"","code":"# Create a Plumber API with resources pr(...) %>%   pr_mcp(transport = \"stdio\") %>%      # Add a resource that provides dataset information   pr_mcp_resource(     uri = \"/data/iris-summary\",     func = function() {       paste(         \"Dataset: iris\",         paste(\"Dimensions:\", paste(dim(iris), collapse = \" x \")),         \"\",         capture.output(summary(iris)),         sep = \"\\n\"       )     },     name = \"Iris Dataset Summary\",     description = \"Statistical summary and structure of the iris dataset\"   ) %>%      # Add a resource that shows current memory usage   pr_mcp_resource(     uri = \"/system/memory\",     func = function() {       mem <- gc()       paste(         \"R Memory Usage:\",         paste(\"Used (Mb):\", round(sum(mem[,2]), 2)),         paste(\"Gc Trigger (Mb):\", round(sum(mem[,6]), 2)),         \"\",         \"Object sizes in workspace:\",         capture.output(print(object.size(ls.str()), units = \"Mb\")),         sep = \"\\n\"       )     },     name = \"R Memory Usage\",     description = \"Current R session memory statistics\"   ) %>%      # Add a resource with model diagnostics   pr_mcp_resource(     uri = \"/models/latest-lm\",     func = function() {       # Example: fit a model and return diagnostics       model <- lm(mpg ~ wt + hp, data = mtcars)       paste(         \"Linear Model: mpg ~ wt + hp\",         \"\",         capture.output(summary(model)),         \"\",         \"Diagnostic plots saved to: /tmp/lm_diagnostics.png\",         sep = \"\\n\"       )     },     name = \"Latest Linear Model\",     description = \"Diagnostics for the most recent linear model\",     mimeType = \"text/plain\"   )"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"built-in-r-help-resources","dir":"","previous_headings":"Resources Support","what":"Built-in R Help Resources","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"automatically adds resources : - R help topics (/help/mean, /help/lm, etc.) - R session information (/r/session-info) - Installed packages (/r/packages)","code":"pr(...) %>%    pr_mcp(transport = \"stdio\") %>%   pr_mcp_help_resources()  # Adds help for common R functions"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"dynamic-resources-with-parameters","dir":"","previous_headings":"Resources Support","what":"Dynamic Resources with Parameters","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"current implementation doesnâ€™t support URI templates, can create resources adapt based runtime conditions:","code":"# Create resources based on available data files data_files <- list.files(\"data/\", pattern = \"\\\\.csv$\")  my_pr <- pr(...) for (file in data_files) {   my_pr <- my_pr %>%     pr_mcp_resource(       uri = paste0(\"/data/\", tools::file_path_sans_ext(file)),       func = local({         current_file <- file  # Capture the file name         function() {           data <- read.csv(file.path(\"data\", current_file))           paste(             paste(\"File:\", current_file),             paste(\"Rows:\", nrow(data)),             paste(\"Columns:\", paste(names(data), collapse = \", \")),             \"\",             \"First 5 rows:\",             capture.output(print(head(data, 5))),             sep = \"\\n\"           )         }       }),       name = paste(\"Dataset:\", tools::file_path_sans_ext(file)),       description = paste(\"Contents of\", file)     ) }"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"resource-usage-examples","dir":"","previous_headings":"Resources Support","what":"Resource Usage Examples","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"MCP server running resources, AI assistants can: Browse available resources - AI can list resources see information available Read specific resources - AI can read resource content understand data environment Use resources context - AI can reference resource information answering questions writing code Example interaction AI assistant:","code":"You: \"What datasets are available in this R session?\" AI: *Lists resources and reads relevant ones*     \"I can see you have the iris dataset available. Based on the     /data/iris-summary resource, it has 150 observations of 5 variables...\"  You: \"Can you help me analyze the relationship between Sepal.Length and Petal.Length?\" AI: *Reads the iris summary resource for context*     \"Based on the iris dataset summary, I can see that Sepal.Length ranges     from 4.3 to 7.9 and Petal.Length from 1.0 to 6.9. Let me create a     linear model to analyze their relationship...\""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"customizing-mcp-path","dir":"","previous_headings":"Advanced Usage","what":"Customizing MCP Path","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"","code":"my_pr %>% pr_mcp(transport = \"http\", path = \"/my-mcp-server\")"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"filtering-endpoints","dir":"","previous_headings":"Advanced Usage","what":"Filtering Endpoints","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"","code":"# Include only specific endpoints my_pr %>% pr_mcp(transport = \"http\", include_endpoints = c(\"GET__echo\", \"POST__add\"))  # Exclude specific endpoints my_pr %>% pr_mcp(transport = \"stdio\", exclude_endpoints = c(\"POST__internal\"))"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"custom-server-info","dir":"","previous_headings":"Advanced Usage","what":"Custom Server Info","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"","code":"my_pr %>% pr_mcp(   transport = \"http\",   server_name = \"my-api-mcp\",   server_version = \"1.0.0\" )"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"complete-example","dir":"","previous_headings":"","what":"Complete Example","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"â€™s step--step example creating MCP-enabled API: Create Plumber API file (my_api.R): Create run server: HTTP API: http://localhost:8000/ MCP endpoint: http://localhost:8000/mcp API documentation: http://localhost:8000/__docs__/","code":"#* @apiTitle My MCP-Enabled API #* @apiDescription API with MCP support for AI assistants  #* Get current time #* @get /time function() {   list(time = Sys.time()) }  #* Calculate factorial #* @param n Integer to calculate factorial #* @post /factorial function(n) {   n <- as.integer(n)   if (n < 0) stop(\"n must be non-negative\")   list(result = factorial(n)) } library(plumber) library(plumber2mcp)  pr(\"my_api.R\") %>%   pr_mcp(transport = \"http\") %>%   pr_run(port = 8000)"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"testing","dir":"","previous_headings":"","what":"Testing","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Run example server: Test MCP client:","code":"source(system.file(\"examples/run_mcp_server.R\", package = \"plumber2mcp\")) source(system.file(\"examples/test_mcp_client.R\", package = \"plumber2mcp\"))"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"using-with-ai-assistants","dir":"","previous_headings":"","what":"Using with AI Assistants","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"MCP server running, can configure AI assistants use :","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"claude-desktop","dir":"","previous_headings":"Using with AI Assistants","what":"Claude Desktop","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Add Claude configuration file:","code":"{   \"mcpServers\": {     \"my-r-api\": {       \"url\": \"http://localhost:8000/mcp\"     }   } }"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"other-ai-assistants","dir":"","previous_headings":"Using with AI Assistants","what":"Other AI Assistants","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Check AI assistantâ€™s documentation MCP configuration instructions.","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"mcp-protocol-details","dir":"","previous_headings":"","what":"MCP Protocol Details","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"package implements Model Context Protocol specification. MCP endpoints handle: Tool Discovery: Lists available Plumber endpoints MCP tools Tool Execution: Converts MCP tool calls Plumber endpoint requests Error Handling: Properly formats errors MCP response format","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"testing-with-mcp-inspector","dir":"","previous_headings":"","what":"Testing with MCP Inspector","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"MCP Inspector tool testing debugging MCP servers.","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"using-mcp-inspector-with-http-transport","dir":"","previous_headings":"Testing with MCP Inspector","what":"Using MCP Inspector with HTTP Transport","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Start plumber API HTTP transport: new terminal, navigate examples directory: stdio-wrapper.py script bridges MCP Inspectorâ€™s stdio interface HTTP server.","code":"library(plumber) library(plumber2mcp)  pr(\"api.R\") %>%   pr_mcp(transport = \"http\") %>%   pr_run(port = 8000) cd /path/to/plumber2mcp/inst/examples mcp-inspector --config http_wrapper_config.json --server plumber2mcp"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"using-mcp-inspector-with-stdio-transport","dir":"","previous_headings":"Testing with MCP Inspector","what":"Using MCP Inspector with Stdio Transport","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Use stdio configuration directly:","code":"cd /path/to/plumber2mcp/inst/examples mcp-inspector --config stdio_config.json --server plumber2mcp"},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"common-issues","dir":"","previous_headings":"Troubleshooting","what":"Common Issues","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Port already use: Change port number pr_run(port = 8001) MCP endpoint found: Ensure called pr_mcp() pr_run() Tools showing : Check Plumber endpoints proper annotations HTTP: Ensure server running port 8000 starting MCP Inspector Check cwd path config files points correct directory","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"debug-mode","dir":"","previous_headings":"Troubleshooting","what":"Debug Mode","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Enable verbose logging:","code":"# For stdio transport my_pr %>% pr_mcp(transport = \"stdio\", debug = TRUE)  # For HTTP transport (debug not available) my_pr %>% pr_mcp(transport = \"http\") %>% pr_run(port = 8000)"},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"Contributions welcome! Please file issues pull requests GitHub.","code":""},{"path":"https://armish.github.io/plumber2mcp/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"plumber2mcp â€¢ Add MCP Support to Plumber APIs","text":"MIT","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":null,"dir":"Reference","previous_headings":"","what":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"Extends plumber APIs Model Context Protocol (MCP) support, enabling AI assistants discover call API endpoints tools, read resources context, use prompt templates guided interactions. Simply add pr_mcp() plumber pipeline automatically expose endpoints via MCP protocol rich schema generation documentation. plumber2mcp package extends Plumber APIs Model Context Protocol (MCP) support, enabling AI assistants (like Claude, ChatGPT, etc.) discover interact R functions three key MCP primitives: Tools: AI assistants can call API endpoints directly Resources: AI assistants can read documentation, data, analysis results Prompts: AI assistants can use pre-defined templates guide interactions","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"main-functions","dir":"Reference","previous_headings":"","what":"Main Functions","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"Core MCP Setup: pr_mcp: Add MCP support Plumber router (main function) pr_mcp_http: Add MCP support HTTP transport pr_mcp_stdio: Add MCP support stdio transport Resources: pr_mcp_resource: Add custom resource pr_mcp_help_resources: Add built-R help resources Prompts: pr_mcp_prompt: Add prompt template","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"quick-start","dir":"Reference","previous_headings":"","what":"Quick Start","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"HTTP Transport (testing): Stdio Transport (MCP clients):","code":"library(plumber) library(plumber2mcp)  pr(\"plumber.R\") %>%   pr_mcp(transport = \"http\") %>%   pr_run(port = 8000) library(plumber) library(plumber2mcp)  pr(\"plumber.R\") %>%   pr_mcp(transport = \"stdio\")"},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"adding-features","dir":"Reference","previous_headings":"","what":"Adding Features","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"Add Resource: Add Prompt:","code":"pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_resource(     uri = \"/data/summary\",     func = function() summary(mtcars),     name = \"Dataset Summary\"   ) pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"analyze-data\",     description = \"Guide for data analysis\",     arguments = list(       list(name = \"dataset\", description = \"Dataset name\", required = TRUE)     ),     func = function(dataset) {       paste(\"Please analyze the\", dataset, \"dataset\")     }   )"},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"mcp-protocol","dir":"Reference","previous_headings":"","what":"MCP Protocol","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"package implements Model Context Protocol (MCP) specification version 2025-06-18. provides: Automatic endpoint discovery: Scans Plumber API converts endpoints MCP tools Rich schema generation: Creates detailed JSON schemas roxygen documentation JSON-RPC 2.0: Handles MCP communication via JSON-RPC Multiple transports: HTTP (testing) stdio (MCP clients) Enhanced documentation: Extracts parameter descriptions, types, defaults","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"supported-mcp-methods","dir":"Reference","previous_headings":"","what":"Supported MCP Methods","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"Core Protocol: initialize: Server initialization capability negotiation ping: Health check Tools: tools/list: List available API endpoints tools/call: Execute API endpoint Resources: resources/list: List available resources resources/read: Read specific resource resources/templates/list: List resource templates Prompts: prompts/list: List available prompt templates prompts/get: Get specific prompt arguments","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"configuration","dir":"Reference","previous_headings":"","what":"Configuration","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"Customize MCP server : path: Custom mount path (default: \"/mcp\") include_endpoints: Whitelist specific endpoints exclude_endpoints: Blacklist specific endpoints server_name: Custom server name server_version: Custom server version debug: Enable debug logging (stdio )","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"learn-more","dir":"Reference","previous_headings":"","what":"Learn More","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"MCP Specification: https://modelcontextprotocol.io GitHub Repository: https://github.com/armish/plumber2mcp Plumber Documentation: https://www.rplumber.io","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"Maintainer: Bulent Arman Aksoy arman@aksoy.org","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/plumber2mcp-package.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"plumber2mcp: Add Model Context Protocol Support to Plumber APIs â€” plumber2mcp-package","text":"","code":"if (FALSE) { # \\dontrun{ # Basic HTTP server library(plumber) library(plumber2mcp)  pr <- plumber::pr() pr$handle(\"GET\", \"/echo\", function(msg = \"hello\") {   list(message = msg) })  pr %>%   pr_mcp(transport = \"http\") %>%   pr_run(port = 8000)  # Full-featured stdio server pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_resource(     uri = \"/docs/api\",     func = function() \"API Documentation\",     name = \"API Docs\"   ) %>%   pr_mcp_prompt(     name = \"help\",     description = \"Get help with the API\",     func = function() \"How can I help you use this API?\"   ) } # }"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp.html","id":null,"dir":"Reference","previous_headings":"","what":"Add MCP (Model Context Protocol) support to a Plumber router â€” pr_mcp","title":"Add MCP (Model Context Protocol) support to a Plumber router â€” pr_mcp","text":"Add MCP (Model Context Protocol) support Plumber router","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add MCP (Model Context Protocol) support to a Plumber router â€” pr_mcp","text":"","code":"pr_mcp(   pr,   transport,   path = \"/mcp\",   include_endpoints = NULL,   exclude_endpoints = NULL,   server_name = \"plumber-mcp\",   server_version = \"0.3.0\",   debug = FALSE )"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add MCP (Model Context Protocol) support to a Plumber router â€” pr_mcp","text":"pr Plumber router transport Transport method: \"http\" \"stdio\" (required) path path mount MCP server (default: \"/mcp\") - used HTTP transport include_endpoints Endpoints include MCP tools (NULL ) exclude_endpoints Endpoints exclude MCP tools server_name Name MCP server server_version Version MCP server debug Logical, whether write debug messages (stdio transport )","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_help_resources.html","id":null,"dir":"Reference","previous_headings":"","what":"Add built-in R help resources to an MCP-enabled Plumber router â€” pr_mcp_help_resources","title":"Add built-in R help resources to an MCP-enabled Plumber router â€” pr_mcp_help_resources","text":"convenience function adds resources R documentation AI assistants can read better understand R functions packages.","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_help_resources.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add built-in R help resources to an MCP-enabled Plumber router â€” pr_mcp_help_resources","text":"","code":"pr_mcp_help_resources(pr, topics = NULL)"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_help_resources.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add built-in R help resources to an MCP-enabled Plumber router â€” pr_mcp_help_resources","text":"pr Plumber router object (must MCP support added) topics Character vector help topics expose (NULL common topics)","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_help_resources.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add built-in R help resources to an MCP-enabled Plumber router â€” pr_mcp_help_resources","text":"","code":"if (FALSE) { # \\dontrun{ pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_help_resources() } # }"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_http.html","id":null,"dir":"Reference","previous_headings":"","what":"Add MCP support via HTTP transport â€” pr_mcp_http","title":"Add MCP support via HTTP transport â€” pr_mcp_http","text":"original pr_mcp implementation adds HTTP endpoints","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_http.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add MCP support via HTTP transport â€” pr_mcp_http","text":"","code":"pr_mcp_http(   pr,   path = \"/mcp\",   include_endpoints = NULL,   exclude_endpoints = NULL,   server_name = \"plumber-mcp\",   server_version = \"0.3.0\" )"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_http.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add MCP support via HTTP transport â€” pr_mcp_http","text":"pr Plumber router path path mount MCP server (default: \"/mcp\") - used HTTP transport include_endpoints Endpoints include MCP tools (NULL ) exclude_endpoints Endpoints exclude MCP tools server_name Name MCP server server_version Version MCP server","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_prompt.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a prompt template to an MCP-enabled Plumber router â€” pr_mcp_prompt","title":"Add a prompt template to an MCP-enabled Plumber router â€” pr_mcp_prompt","text":"Prompts reusable templates AI assistants can discover use interact API. provide structured messages optional arguments can filled AI user.","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_prompt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a prompt template to an MCP-enabled Plumber router â€” pr_mcp_prompt","text":"","code":"pr_mcp_prompt(pr, name, description, arguments = NULL, func)"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_prompt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a prompt template to an MCP-enabled Plumber router â€” pr_mcp_prompt","text":"pr Plumber router object (must MCP support added) name Unique identifier prompt (e.g., \"code-review\", \"analyze-data\") description Human-readable description prompt arguments Optional list argument definitions. argument list : name: argument name description: argument required: Boolean indicating argument required (default: FALSE) func function generates prompt messages. function : Accept arguments matching defined arguments parameter Return either character vector, list messages, single message message can either string (treated user message) list role content","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_prompt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a prompt template to an MCP-enabled Plumber router â€” pr_mcp_prompt","text":"","code":"if (FALSE) { # \\dontrun{ # Simple prompt with no arguments pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"greeting\",     description = \"Generate a friendly greeting\",     func = function() {       \"Hello! How can I help you with R today?\"     }   )  # Prompt with arguments pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"analyze-dataset\",     description = \"Guide for analyzing a dataset\",     arguments = list(       list(name = \"dataset\", description = \"Name of the dataset to analyze\", required = TRUE),       list(name = \"focus\", description = \"Specific aspect to focus on\", required = FALSE)     ),     func = function(dataset, focus = \"general\") {       if (focus == \"general\") {         msg <- sprintf(           paste(             \"Please analyze the %s dataset. Provide:\",             \"1. Summary statistics\",             \"2. Data quality assessment\",             \"3. Interesting patterns or relationships\",             \"4. Recommendations for further analysis\",             sep = \"\\n\"           ),           dataset         )       } else {         msg <- sprintf(           \"Please analyze the %s dataset with a focus on: %s\",           dataset, focus         )       }        # Return as a structured message       list(         role = \"user\",         content = list(type = \"text\", text = msg)       )     }   )  # Multi-turn conversation prompt pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_prompt(     name = \"code-review\",     description = \"Review R code for quality and best practices\",     arguments = list(       list(name = \"code\", description = \"The R code to review\", required = TRUE)     ),     func = function(code) {       list(         list(           role = \"user\",           content = list(             type = \"text\",             text = paste(\"Please review this R code:\", code, sep = \"\\n\\n\")           )         ),         list(           role = \"assistant\",           content = list(             type = \"text\",             text = \"I'll review your R code for:\"           )         ),         list(           role = \"user\",           content = list(             type = \"text\",             text = paste(               \"Focus on:\",               \"1. Code correctness and logic\",               \"2. R idioms and best practices\",               \"3. Performance considerations\",               \"4. Documentation and readability\",               sep = \"\\n\"             )           )         )       )     }   ) } # }"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_resource.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a resource to an MCP-enabled Plumber router â€” pr_mcp_resource","title":"Add a resource to an MCP-enabled Plumber router â€” pr_mcp_resource","text":"Resources allow AI assistants read content R environment, documentation, data files, analysis results, content want make available.","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_resource.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a resource to an MCP-enabled Plumber router â€” pr_mcp_resource","text":"","code":"pr_mcp_resource(   pr,   uri,   func,   name,   description = NULL,   mimeType = \"text/plain\" )"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_resource.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a resource to an MCP-enabled Plumber router â€” pr_mcp_resource","text":"pr Plumber router object (must MCP support added) uri URI pattern resource (e.g., \"/help/topic\") func function returns resource content name human-readable name resource description description resource provides mimeType MIME type resource content (default: \"text/plain\")","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_resource.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a resource to an MCP-enabled Plumber router â€” pr_mcp_resource","text":"","code":"if (FALSE) { # \\dontrun{ # Add a resource for R help topics pr %>%   pr_mcp(transport = \"stdio\") %>%   pr_mcp_resource(     uri = \"/help/mean\",     func = function() capture.output(help(\"mean\")),     name = \"R Help: mean function\",     description = \"Documentation for the mean() function\"   ) } # }"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_stdio.html","id":null,"dir":"Reference","previous_headings":"","what":"Run MCP server with stdio transport â€” pr_mcp_stdio","title":"Run MCP server with stdio transport â€” pr_mcp_stdio","text":"Creates MCP server communicates via standard input/output (stdio). standard transport MCP clients like Claude Desktop, mcp-cli, etc.","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_stdio.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run MCP server with stdio transport â€” pr_mcp_stdio","text":"","code":"pr_mcp_stdio(   pr,   include_endpoints = NULL,   exclude_endpoints = NULL,   server_name = \"plumber-mcp\",   server_version = \"0.2.0\",   debug = FALSE )"},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_stdio.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run MCP server with stdio transport â€” pr_mcp_stdio","text":"pr Plumber router object include_endpoints Character vector endpoints include MCP tools (NULL ) exclude_endpoints Character vector endpoints exclude MCP tools server_name Name MCP server server_version Version MCP server debug Logical, whether write debug messages stderr","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_stdio.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run MCP server with stdio transport â€” pr_mcp_stdio","text":"function runs interrupted return","code":""},{"path":"https://armish.github.io/plumber2mcp/reference/pr_mcp_stdio.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run MCP server with stdio transport â€” pr_mcp_stdio","text":"","code":"if (FALSE) { # \\dontrun{ # Create a Plumber API and run as MCP stdio server pr <- plumb(\"api.R\") pr_mcp_stdio(pr) } # }"},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"breaking-changes-0-4-0","dir":"Changelog","previous_headings":"","what":"Breaking Changes","title":"plumber2mcp 0.4.0","text":"breaking change clients still using old protocol version Clients must support protocol version 2025-06-18 communicate version","code":""},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"mcp-protocol-support-0-4-0","dir":"Changelog","previous_headings":"New Features","what":"MCP Protocol 2025-06-18 Support","title":"plumber2mcp 0.4.0","text":"HTTP Header Support: Added MCP-Protocol-Version header HTTP transport (required new spec) Structured Tool Output: Re-enabled outputSchema support tools (now standard feature 2025-06-18) Automatically extracted roxygen comments generated method path","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"improvements-0-4-0","dir":"Changelog","previous_headings":"","what":"Improvements","title":"plumber2mcp 0.4.0","text":"Better protocol negotiation initialization Enhanced tool definitions machine-readable names human-friendly titles Output schemas now provide AI assistants structured format expectations 393 tests passing new protocol version","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"technical-details-0-4-0","dir":"Changelog","previous_headings":"","what":"Technical Details","title":"plumber2mcp 0.4.0","text":"Updated protocol version strings throughout codebase Modified HTTP handler set read MCP-Protocol-Version header Updated HTTP stdio transports include new fields Enhanced handle_tools_list include title outputSchema available Package documentation updated reflect new protocol version","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"migration-guide-0-4-0","dir":"Changelog","previous_headings":"","what":"Migration Guide","title":"plumber2mcp 0.4.0","text":"users upgrading 0.3.0: * code changes required - package handles new protocol automatically * MCP clients must support protocol version 2025-06-18 * Tools now include optional title outputSchema fields * HTTP responses include MCP-Protocol-Version header","code":""},{"path":[]},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"prompts-support-0-3-0","dir":"Changelog","previous_headings":"New Features","what":"Prompts Support","title":"plumber2mcp 0.3.0","text":"Added full MCP Prompts support allowing define reusable prompt templates AI assistants can discover use New pr_mcp_prompt() function register prompt templates MCP server Prompts support optional arguments required/optional parameters Prompts can return simple strings, structured messages, multi-turn conversations HTTP stdio transports fully support prompts Added prompts/list prompts/get JSON-RPC handlers Updated initialize response advertise prompts capability","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"enhanced-testing-0-3-0","dir":"Changelog","previous_headings":"New Features","what":"Enhanced Testing","title":"plumber2mcp 0.3.0","text":"Added comprehensive edge case testing (24 new tests) Added integration tests combined features (10 new tests) Added security validation tests (18 new tests) Total test count increased ~69 ~121 tests (75% increase) Tests now cover error handling, malformed inputs, injection attacks, real-world scenarios","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"improvements-0-3-0","dir":"Changelog","previous_headings":"","what":"Improvements","title":"plumber2mcp 0.3.0","text":"Enhanced schema generation now includes output schemas Better error handling malformed JSON-RPC requests Improved handling NULL, NA, empty values robust handling complex nested data structures Added support functions req/res parameters","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"documentation-0-3-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"plumber2mcp 0.3.0","text":"Comprehensive README updates prompts examples use cases Added example file demonstrating prompts usage (inst/examples/prompts_example.R) Detailed documentation prompt message formats Added use cases workflow guidance, code generation, domain-specific assistance","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"bug-fixes-0-3-0","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"plumber2mcp 0.3.0","text":"Fixed parameter ordering stdio transport handlers Fixed JSON-RPC error responses unknown methods Improved type mapping plumber parameters","code":""},{"path":[]},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"resources-support-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Resources Support","title":"plumber2mcp 0.2.0","text":"Added MCP Resources support exposing R content AI assistants New pr_mcp_resource() function add custom resources New pr_mcp_help_resources() convenience function R help topics Resources can provide documentation, data summaries, session info, Added resources/list resources/read handlers","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"stdio-transport-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Stdio Transport","title":"plumber2mcp 0.2.0","text":"Added native stdio transport support standard MCP clients New pr_mcp_stdio() function stdio-based servers Compatible mcp-cli, Claude Desktop, MCP clients Handles JSON-RPC stdin/stdout","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"improvements-0-2-0","dir":"Changelog","previous_headings":"","what":"Improvements","title":"plumber2mcp 0.2.0","text":"Enhanced schema generation rich descriptions roxygen comments Automatic detection required vs optional parameters Improved type inference function parameters return values Better handling empty properties (serialize object, array)","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"documentation-0-2-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"plumber2mcp 0.2.0","text":"Comprehensive README examples transport types Added resources examples documentation Added MCP Inspector testing instructions","code":""},{"path":[]},{"path":[]},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"core-features-0-1-0","dir":"Changelog","previous_headings":"Initial Release","what":"Core Features","title":"plumber2mcp 0.1.0","text":"HTTP transport MCP protocol Automatic endpoint discovery Plumber APIs JSON-RPC 2.0 protocol implementation Tool schema generation function signatures Support include/exclude endpoint filters Customizable server name, version, mount path","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"mcp-protocol-support-0-1-0","dir":"Changelog","previous_headings":"Initial Release","what":"MCP Protocol Support","title":"plumber2mcp 0.1.0","text":"initialize - Server initialization capabilities tools/list - List available API endpoints tools tools/call - Execute API endpoints MCP ping - Server health check","code":""},{"path":"https://armish.github.io/plumber2mcp/news/index.html","id":"documentation-0-1-0","dir":"Changelog","previous_headings":"Initial Release","what":"Documentation","title":"plumber2mcp 0.1.0","text":"Basic README installation usage Example Plumber API files GitHub Actions CI/CD setup","code":""}]
