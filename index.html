<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>plumber2mcp • Add MCP Support to Plumber APIs • plumber2mcp</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="plumber2mcp • Add MCP Support to Plumber APIs">
<meta name="description" content="Transform your Plumber APIs into AI-accessible tools using the Model Context Protocol (MCP)
">
<meta property="og:description" content="Transform your Plumber APIs into AI-accessible tools using the Model Context Protocol (MCP)
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">plumber2mcp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/getting-started.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/armish/plumber2mcp" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="plumber2mcp">plumber2mcp<a class="anchor" aria-label="anchor" href="#plumber2mcp"></a>
</h1></div>
<!-- badges: start -->

<p>Add Model Context Protocol (MCP) support to your Plumber APIs with a single function call.</p>
<div class="section level2">
<h2 id="what-is-mcp">What is MCP?<a class="anchor" aria-label="anchor" href="#what-is-mcp"></a>
</h2>
<p>The Model Context Protocol (MCP) is a standard protocol that enables AI assistants (like Claude, ChatGPT, etc.) to interact with external tools and services. By adding MCP support to your Plumber API, you make your R functions available as:</p>
<ul>
<li>
<strong>Tools</strong>: AI assistants can call your API endpoints directly</li>
<li>
<strong>Resources</strong>: AI assistants can read documentation, data, and analysis results</li>
<li>
<strong>Prompts</strong>: AI assistants can use pre-defined templates to guide interactions</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"armish/plumber2mcp"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h3>
<p>This package requires: - R (&gt;= 4.0.0) - plumber (&gt;= 1.0.0) - jsonlite - httr</p>
</div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="section level3">
<h3 id="http-transport-default">HTTP Transport (Default)<a class="anchor" aria-label="anchor" href="#http-transport-default"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rplumber.io" class="external-link">plumber</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">plumber2mcp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create and run a Plumber API with MCP support via HTTP</span></span>
<span><span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="st">"plumber.R"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"http"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.rplumber.io/reference/pr_run.html" class="external-link">pr_run</a></span><span class="op">(</span>port <span class="op">=</span> <span class="fl">8000</span><span class="op">)</span></span></code></pre></div>
<p>Your API now has: - Regular HTTP endpoints at <code>http://localhost:8000/</code> - MCP server at <code>http://localhost:8000/mcp</code></p>
</div>
<div class="section level3">
<h3 id="stdio-transport-native-mcp">Stdio Transport (Native MCP)<a class="anchor" aria-label="anchor" href="#stdio-transport-native-mcp"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rplumber.io" class="external-link">plumber</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">plumber2mcp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create and run a Plumber API with native stdio transport</span></span>
<span><span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="st">"plumber.R"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span><span class="op">)</span></span></code></pre></div>
<p>Use with mcp-cli or other MCP clients:</p>
<ol style="list-style-type: decimal">
<li>Create a <code>server_config.json</code> file:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="dt">"mcpServers"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="dt">"plumber2mcp"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>      <span class="dt">"command"</span><span class="fu">:</span> <span class="st">"Rscript"</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>      <span class="dt">"args"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"-e"</span><span class="ot">,</span> <span class="st">"plumber::pr('api.R') %&gt;% plumber2mcp::pr_mcp(transport='stdio')"</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>      <span class="dt">"cwd"</span><span class="fu">:</span> <span class="st">"."</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Test the connection:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">mcp-cli</span> servers  <span class="co"># Should show your server as "Ready"</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">mcp-cli</span> tools    <span class="co"># List available tools</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="ex">mcp-cli</span> cmd <span class="at">--tool</span> GET__echo <span class="at">--tool-args</span> <span class="st">'{"msg": "Hello!"}'</span>  <span class="co"># Call a tool</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="how-it-works">How It Works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h2>
<p>The <code><a href="reference/pr_mcp.html">pr_mcp()</a></code> function automatically:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Discovers your endpoints</strong>: Scans all endpoints in your Plumber API</li>
<li>
<strong>Creates MCP tools</strong>: Converts each endpoint into an MCP tool with proper schema</li>
<li>
<strong>Adds MCP endpoints</strong>: Adds the necessary MCP protocol endpoints</li>
<li>
<strong>Handles JSON-RPC</strong>: Manages all MCP communication via JSON-RPC</li>
<li>
<strong>Supports resources</strong>: Allows AI assistants to read documentation and data from your R environment</li>
<li>
<strong>Supports prompts</strong>: Exposes reusable prompt templates that guide AI interactions</li>
<li>
<strong>Generates rich schemas</strong>: Creates detailed input/output schemas with documentation from your roxygen comments</li>
</ol>
</div>
<div class="section level2">
<h2 id="enhanced-documentation--schema-generation">Enhanced Documentation &amp; Schema Generation<a class="anchor" aria-label="anchor" href="#enhanced-documentation--schema-generation"></a>
</h2>
<p>plumber2mcp automatically generates rich JSON schemas and detailed documentation for your API endpoints by analyzing your roxygen comments and function signatures. This feature, inspired by FastAPI-MCP, makes your R APIs much more usable by AI assistants.</p>
<div class="section level3">
<h3 id="rich-tool-descriptions">Rich Tool Descriptions<a class="anchor" aria-label="anchor" href="#rich-tool-descriptions"></a>
</h3>
<p>When you document your endpoints with roxygen comments, plumber2mcp creates comprehensive tool descriptions:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#* Calculate statistical operations on numeric data</span></span>
<span><span class="co">#* </span></span>
<span><span class="co">#* This endpoint performs various statistical calculations on a vector of numbers.</span></span>
<span><span class="co">#* It supports multiple operations and handles missing values.</span></span>
<span><span class="co">#* </span></span>
<span><span class="co">#* @param numbers Numeric vector of values to calculate statistics for</span></span>
<span><span class="co">#* @param operation Statistical operation to perform: "mean", "median", "sum", "sd" (default: "mean")</span></span>
<span><span class="co">#* @param na_rm:bool Logical value indicating whether to remove NA values (default: TRUE)</span></span>
<span><span class="co">#* @param digits:int Number of decimal places to round the result (default: 2)</span></span>
<span><span class="co">#* @return List containing the calculated result and metadata</span></span>
<span><span class="co">#* @post /calculate</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">numbers</span>, <span class="va">operation</span> <span class="op">=</span> <span class="st">"mean"</span>, <span class="va">na_rm</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">digits</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Convert input to numeric</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">is.character</a></span><span class="op">(</span><span class="va">numbers</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">numbers</span>, <span class="st">","</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">numbers</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span><span class="va">operation</span>,</span>
<span>    <span class="st">"mean"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">numbers</span>, na.rm <span class="op">=</span> <span class="va">na_rm</span><span class="op">)</span>,</span>
<span>    <span class="st">"median"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">numbers</span>, na.rm <span class="op">=</span> <span class="va">na_rm</span><span class="op">)</span>,</span>
<span>    <span class="st">"sum"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">numbers</span>, na.rm <span class="op">=</span> <span class="va">na_rm</span><span class="op">)</span>,</span>
<span>    <span class="st">"sd"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">numbers</span>, na.rm <span class="op">=</span> <span class="va">na_rm</span><span class="op">)</span>,</span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Unknown operation: "</span>, <span class="va">operation</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    result <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">digits</span><span class="op">)</span>,</span>
<span>    operation <span class="op">=</span> <span class="va">operation</span>,</span>
<span>    count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">numbers</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">numbers</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    input_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">numbers</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This creates an MCP tool with:</p>
<p><strong>Enhanced Description:</strong></p>
<pre><code>Calculate statistical operations on numeric data

This endpoint performs various statistical calculations on a vector of numbers.
It supports multiple operations and handles missing values.

Parameters:
- numbers (string): Numeric vector of values to calculate statistics for
- operation (string) [default: mean]: Statistical operation to perform: "mean", "median", "sum", "sd"
- na_rm (boolean) [default: TRUE]: Logical value indicating whether to remove NA values
- digits (integer) [default: 2]: Number of decimal places to round the result

HTTP Method: POST
Path: /calculate</code></pre>
<p><strong>Input Schema:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"object"</span><span class="fu">,</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="dt">"numbers"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span><span class="fu">,</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Numeric vector of values to calculate statistics for"</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="dt">"operation"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span><span class="fu">,</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Statistical operation to perform: </span><span class="ch">\"</span><span class="st">mean</span><span class="ch">\"</span><span class="st">, </span><span class="ch">\"</span><span class="st">median</span><span class="ch">\"</span><span class="st">, </span><span class="ch">\"</span><span class="st">sum</span><span class="ch">\"</span><span class="st">, </span><span class="ch">\"</span><span class="st">sd</span><span class="ch">\"</span><span class="st">"</span><span class="fu">,</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>      <span class="dt">"default"</span><span class="fu">:</span> <span class="st">"mean"</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>    <span class="dt">"na_rm"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"boolean"</span><span class="fu">,</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Logical value indicating whether to remove NA values"</span><span class="fu">,</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>      <span class="dt">"default"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>    <span class="dt">"digits"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"integer"</span><span class="fu">,</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Number of decimal places to round the result"</span><span class="fu">,</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>      <span class="dt">"default"</span><span class="fu">:</span> <span class="dv">2</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>  <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"numbers"</span><span class="ot">]</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Output Schema:</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"object"</span><span class="fu">,</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Structured response object"</span><span class="fu">,</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="dt">"result"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"number"</span><span class="fu">,</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Response field: result"</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>    <span class="dt">"operation"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"string"</span><span class="fu">,</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Response field: operation"</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>    <span class="dt">"count"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"number"</span><span class="fu">,</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Response field: count"</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>    <span class="dt">"input_length"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"number"</span><span class="fu">,</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>      <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Response field: input_length"</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="type-detection-and-schema-features">Type Detection and Schema Features<a class="anchor" aria-label="anchor" href="#type-detection-and-schema-features"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<p><strong>Smart Type Mapping</strong>: Automatically maps R types to JSON Schema types:</p>
<ul>
<li>
<code>logical</code> → <code>boolean</code>
</li>
<li>
<code>integer</code> → <code>integer</code>
</li>
<li>
<code>numeric</code>/<code>double</code> → <code>number</code>
</li>
<li>
<code>character</code> → <code>string</code>
</li>
<li>And supports plumber type annotations like <code>:bool</code>, <code>:int</code>, <code>:array</code>
</li>
</ul>
</li>
<li><p><strong>Default Value Detection</strong>: Extracts default values from function signatures and includes them in schemas</p></li>
<li><p><strong>Required vs Optional Parameters</strong>: Automatically determines which parameters are required based on whether they have default values</p></li>
<li><p><strong>Output Schema Generation</strong>: Analyzes your function’s return statements to automatically generate response schemas</p></li>
<li><p><strong>Rich Parameter Documentation</strong>: Extracts parameter descriptions from roxygen <code>@param</code> tags</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="why-this-matters-for-ai-assistants">Why This Matters for AI Assistants<a class="anchor" aria-label="anchor" href="#why-this-matters-for-ai-assistants"></a>
</h3>
<p>With enhanced schemas, AI assistants can:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Better understand your APIs</strong>: Rich descriptions help AI assistants understand what each endpoint does</li>
<li>
<strong>Provide better suggestions</strong>: Detailed parameter information helps AI assistants suggest appropriate values</li>
<li>
<strong>Generate better code</strong>: Output schemas help AI assistants understand what to expect from your API</li>
<li>
<strong>Reduce errors</strong>: Type information and required/optional parameter detection reduces API call mistakes</li>
<li>
<strong>Self-document</strong>: Your API becomes self-documenting for both humans and AI</li>
</ol>
</div>
<div class="section level3">
<h3 id="example-ai-assistant-interaction">Example AI Assistant Interaction<a class="anchor" aria-label="anchor" href="#example-ai-assistant-interaction"></a>
</h3>
<p>Without enhanced schemas:</p>
<pre><code><span><span class="va">User</span><span class="op">:</span> <span class="st">"Can you help me calculate the mean of some numbers using this API?"</span></span>
<span><span class="va">AI</span><span class="op">:</span> <span class="st">"I can see there's a calculate endpoint, but I'm not sure what parameters it needs..."</span></span></code></pre>
<p>With enhanced schemas:</p>
<pre><code>User: "Can you help me calculate the mean of some numbers using this API?"
AI: "I can see you have a calculate endpoint that performs statistical operations!
     It needs a 'numbers' parameter (required) and optionally 'operation' (defaults to 'mean'),
     'na_rm' (defaults to TRUE), and 'digits' (defaults to 2).

     Let me call it for you:
     POST /calculate with {"numbers": "1,2,3,4,5"}

     This will return an object with the result, operation used, count of valid numbers,
     and input length."</code></pre>
</div>
<div class="section level3">
<h3 id="best-practices-for-documentation">Best Practices for Documentation<a class="anchor" aria-label="anchor" href="#best-practices-for-documentation"></a>
</h3>
<p>To get the most out of enhanced schema generation:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Use descriptive roxygen comments</strong>: Write clear titles and descriptions</li>
<li>
<strong>Document all parameters</strong>: Use <code>@param</code> tags with clear descriptions</li>
<li>
<strong>Specify types when helpful</strong>: Use <code>:bool</code>, <code>:int</code>, <code>:array</code> annotations for clarity</li>
<li>
<strong>Provide meaningful default values</strong>: Default values appear in the schema</li>
<li>
<strong>Use consistent return structures</strong>: Return lists with named elements for better output schemas</li>
<li>
<strong>Include examples in descriptions</strong>: Help AI assistants understand expected formats</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="mcp-endpoints">MCP Endpoints<a class="anchor" aria-label="anchor" href="#mcp-endpoints"></a>
</h2>
<p>Once <code><a href="reference/pr_mcp.html">pr_mcp()</a></code> is applied, your API exposes:</p>
<ul>
<li>
<code>GET /mcp</code> - Server information and capabilities</li>
<li>
<code>POST /mcp/messages</code> - JSON-RPC message handler for MCP protocol</li>
</ul>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Given a simple Plumber API:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#* Echo back the input</span></span>
<span><span class="co">#* </span></span>
<span><span class="co">#* Simple endpoint that echoes back whatever message you send it</span></span>
<span><span class="co">#* </span></span>
<span><span class="co">#* @param msg:string The message to echo back (default: "Hello World")</span></span>
<span><span class="co">#* @get /echo</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">msg</span> <span class="op">=</span> <span class="st">"Hello World"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>message <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Echo:"</span>, <span class="va">msg</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#* Add two numbers together</span></span>
<span><span class="co">#* </span></span>
<span><span class="co">#* Performs arithmetic addition on two numeric values</span></span>
<span><span class="co">#* </span></span>
<span><span class="co">#* @param a:number First number to add</span></span>
<span><span class="co">#* @param b:number Second number to add  </span></span>
<span><span class="co">#* @param precision:int Number of decimal places to round result (default: 2)</span></span>
<span><span class="co">#* @post /add</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, <span class="va">precision</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    result <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">precision</span><span class="op">)</span>,</span>
<span>    operation <span class="op">=</span> <span class="st">"addition"</span>,</span>
<span>    inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>These endpoints become rich MCP tools with full schemas: - <code>GET__echo</code> - Echo back a message with intelligent default handling - <code>POST__add</code> - Add two numbers with configurable precision and structured output</p>
<p>The enhanced documentation provides AI assistants with detailed information about parameter types, defaults, descriptions, and expected response formats.</p>
</div>
<div class="section level2">
<h2 id="prompts-support">Prompts Support<a class="anchor" aria-label="anchor" href="#prompts-support"></a>
</h2>
<p>Prompts are reusable templates that AI assistants can discover and use to interact with your API. They provide structured guidance for common tasks and workflows.</p>
<div class="section level3">
<h3 id="what-are-prompts">What are Prompts?<a class="anchor" aria-label="anchor" href="#what-are-prompts"></a>
</h3>
<p>Prompts in MCP are pre-defined message templates that: - Help AI assistants understand how to use your API effectively - Provide structured guidance for complex workflows - Can accept arguments to customize the prompt content - Support multi-turn conversations</p>
</div>
<div class="section level3">
<h3 id="adding-prompts">Adding Prompts<a class="anchor" aria-label="anchor" href="#adding-prompts"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simple prompt with no arguments</span></span>
<span><span class="va">pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"r-help"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Get help with R programming"</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"I need help with R programming."</span>,</span>
<span>        <span class="st">"Please provide guidance on best practices and common patterns."</span>,</span>
<span>        sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Prompt with arguments</span></span>
<span><span class="va">pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"analyze-dataset"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Generate a comprehensive analysis plan for an R dataset"</span>,</span>
<span>    arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"dataset"</span>,</span>
<span>        description <span class="op">=</span> <span class="st">"Name of the R dataset to analyze"</span>,</span>
<span>        required <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"focus"</span>,</span>
<span>        description <span class="op">=</span> <span class="st">"Specific aspect to focus on"</span>,</span>
<span>        required <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dataset</span>, <span class="va">focus</span> <span class="op">=</span> <span class="st">"general"</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>          <span class="st">"Please analyze the %s dataset in R."</span>,</span>
<span>          <span class="st">"Focus: %s"</span>,</span>
<span>          <span class="st">""</span>,</span>
<span>          <span class="st">"Provide:"</span>,</span>
<span>          <span class="st">"1. Summary statistics"</span>,</span>
<span>          <span class="st">"2. Data quality assessment"</span>,</span>
<span>          <span class="st">"3. Key insights"</span>,</span>
<span>          sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="va">dataset</span>, <span class="va">focus</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Multi-turn conversation prompt</span></span>
<span><span class="va">pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"code-review"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Review R code for quality and best practices"</span>,</span>
<span>    arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"code"</span>, description <span class="op">=</span> <span class="st">"The R code to review"</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>          role <span class="op">=</span> <span class="st">"user"</span>,</span>
<span>          content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            type <span class="op">=</span> <span class="st">"text"</span>,</span>
<span>            text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Please review this R code:"</span>, <span class="va">code</span>, sep <span class="op">=</span> <span class="st">"\n\n"</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>          role <span class="op">=</span> <span class="st">"assistant"</span>,</span>
<span>          content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            type <span class="op">=</span> <span class="st">"text"</span>,</span>
<span>            text <span class="op">=</span> <span class="st">"I'll review your code for correctness, performance, and style."</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>          role <span class="op">=</span> <span class="st">"user"</span>,</span>
<span>          content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            type <span class="op">=</span> <span class="st">"text"</span>,</span>
<span>            text <span class="op">=</span> <span class="st">"Please provide specific suggestions for improvement."</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="prompt-message-formats">Prompt Message Formats<a class="anchor" aria-label="anchor" href="#prompt-message-formats"></a>
</h3>
<p>Your prompt function can return messages in several formats:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Simple String</strong> - Automatically converted to a user message:</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">func</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="st">"Hello World"</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>
<strong>Structured Message</strong> - Full control over role and content:</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">func</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    role <span class="op">=</span> <span class="st">"user"</span>,</span>
<span>    content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"text"</span>, text <span class="op">=</span> <span class="st">"Your message"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>
<strong>Multiple Messages</strong> - For multi-turn conversations:</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">func</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>role <span class="op">=</span> <span class="st">"user"</span>, content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"text"</span>, text <span class="op">=</span> <span class="st">"First message"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>role <span class="op">=</span> <span class="st">"assistant"</span>, content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"text"</span>, text <span class="op">=</span> <span class="st">"Second message"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="use-cases-for-prompts">Use Cases for Prompts<a class="anchor" aria-label="anchor" href="#use-cases-for-prompts"></a>
</h3>
<p><strong>Workflow Guidance</strong></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>  <span class="va">pr</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"data-pipeline"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Guide for building data processing pipelines"</span>,</span>
<span>  arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"data_type"</span>, description <span class="op">=</span> <span class="st">"Type of data to process"</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">data_type</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Create a data processing pipeline for %s data..."</span>, <span class="va">data_type</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Code Generation Templates</strong></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>  <span class="va">pr</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"create-endpoint"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Template for creating new Plumber endpoints"</span>,</span>
<span>  func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>      <span class="st">"Generate a Plumber endpoint with:"</span>,</span>
<span>      <span class="st">"1. Proper roxygen documentation"</span>,</span>
<span>      <span class="st">"2. Input validation"</span>,</span>
<span>      <span class="st">"3. Error handling"</span>,</span>
<span>      <span class="st">"4. Example usage"</span>,</span>
<span>      sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Domain-Specific Assistance</strong></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>  <span class="va">pr</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"statistical-test"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Choose and implement appropriate statistical tests"</span>,</span>
<span>  arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"research_question"</span>, description <span class="op">=</span> <span class="st">"Research question"</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">research_question</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"Research Question: %s"</span>,</span>
<span>        <span class="st">""</span>,</span>
<span>        <span class="st">"Help me:"</span>,</span>
<span>        <span class="st">"1. Choose the appropriate statistical test"</span>,</span>
<span>        <span class="st">"2. Check assumptions"</span>,</span>
<span>        <span class="st">"3. Implement in R"</span>,</span>
<span>        <span class="st">"4. Interpret results"</span>,</span>
<span>        sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="va">research_question</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-complete-setup-with-prompts">Example: Complete Setup with Prompts<a class="anchor" aria-label="anchor" href="#example-complete-setup-with-prompts"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rplumber.io" class="external-link">plumber</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">plumber2mcp</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="st">"api.R"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span></span>
<span>  <span class="co"># Add analysis prompt</span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"analyze"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Analyze data from the API"</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="st">"Guide me through analyzing the data available from this API."</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span></span>
<span>  <span class="co"># Add troubleshooting prompt</span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_prompt.html">pr_mcp_prompt</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"troubleshoot"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Help troubleshoot API issues"</span>,</span>
<span>    arguments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"issue"</span>, description <span class="op">=</span> <span class="st">"Description of the issue"</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">issue</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"I'm experiencing this issue with the API: %s\n\nHow can I resolve it?"</span>, <span class="va">issue</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="resources-support">Resources Support<a class="anchor" aria-label="anchor" href="#resources-support"></a>
</h2>
<p>Resources allow AI assistants to read content from your R environment, such as documentation, data descriptions, or analysis results.</p>
<div class="section level3">
<h3 id="adding-custom-resources">Adding Custom Resources<a class="anchor" aria-label="anchor" href="#adding-custom-resources"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a Plumber API with resources</span></span>
<span><span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># Add a resource that provides dataset information</span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_resource.html">pr_mcp_resource</a></span><span class="op">(</span></span>
<span>    uri <span class="op">=</span> <span class="st">"/data/iris-summary"</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"Dataset: iris"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Dimensions:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">" x "</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="st">""</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Iris Dataset Summary"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Statistical summary and structure of the iris dataset"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># Add a resource that shows current memory usage</span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_resource.html">pr_mcp_resource</a></span><span class="op">(</span></span>
<span>    uri <span class="op">=</span> <span class="st">"/system/memory"</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">mem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"R Memory Usage:"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Used (Mb):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">mem</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Gc Trigger (Mb):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">mem</span><span class="op">[</span>,<span class="fl">6</span><span class="op">]</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="st">""</span>,</span>
<span>        <span class="st">"Object sizes in workspace:"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/ls_str.html" class="external-link">ls.str</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, units <span class="op">=</span> <span class="st">"Mb"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"R Memory Usage"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Current R session memory statistics"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># Add a resource with model diagnostics</span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_resource.html">pr_mcp_resource</a></span><span class="op">(</span></span>
<span>    uri <span class="op">=</span> <span class="st">"/models/latest-lm"</span>,</span>
<span>    func <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="co"># Example: fit a model and return diagnostics</span></span>
<span>      <span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>        <span class="st">"Linear Model: mpg ~ wt + hp"</span>,</span>
<span>        <span class="st">""</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="st">""</span>,</span>
<span>        <span class="st">"Diagnostic plots saved to: /tmp/lm_diagnostics.png"</span>,</span>
<span>        sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Latest Linear Model"</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Diagnostics for the most recent linear model"</span>,</span>
<span>    mimeType <span class="op">=</span> <span class="st">"text/plain"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="built-in-r-help-resources">Built-in R Help Resources<a class="anchor" aria-label="anchor" href="#built-in-r-help-resources"></a>
</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp_help_resources.html">pr_mcp_help_resources</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Adds help for common R functions</span></span></code></pre></div>
<p>This automatically adds resources for: - R help topics (<code>/help/mean</code>, <code>/help/lm</code>, etc.) - R session information (<code>/r/session-info</code>) - Installed packages (<code>/r/packages</code>)</p>
</div>
<div class="section level3">
<h3 id="dynamic-resources-with-parameters">Dynamic Resources with Parameters<a class="anchor" aria-label="anchor" href="#dynamic-resources-with-parameters"></a>
</h3>
<p>While the current implementation doesn’t support URI templates, you can create resources that adapt based on runtime conditions:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create resources based on available data files</span></span>
<span><span class="va">data_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="st">"data/"</span>, pattern <span class="op">=</span> <span class="st">"\\.csv$"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">file</span> <span class="kw">in</span> <span class="va">data_files</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">my_pr</span> <span class="op">&lt;-</span> <span class="va">my_pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="reference/pr_mcp_resource.html">pr_mcp_resource</a></span><span class="op">(</span></span>
<span>      uri <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/data/"</span>, <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/fileutils.html" class="external-link">file_path_sans_ext</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      func <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">local</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="va">current_file</span> <span class="op">&lt;-</span> <span class="va">file</span>  <span class="co"># Capture the file name</span></span>
<span>        <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="va">current_file</span><span class="op">)</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"File:"</span>, <span class="va">current_file</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Rows:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Columns:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            <span class="st">""</span>,</span>
<span>            <span class="st">"First 5 rows:"</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>      <span class="op">}</span><span class="op">)</span>,</span>
<span>      name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Dataset:"</span>, <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/fileutils.html" class="external-link">file_path_sans_ext</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Contents of"</span>, <span class="va">file</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="resource-usage-examples">Resource Usage Examples<a class="anchor" aria-label="anchor" href="#resource-usage-examples"></a>
</h3>
<p>Once your MCP server is running with resources, AI assistants can:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Browse available resources</strong> - The AI can list all resources to see what information is available</li>
<li>
<strong>Read specific resources</strong> - The AI can read resource content to understand your data and environment</li>
<li>
<strong>Use resources for context</strong> - The AI can reference resource information when answering questions or writing code</li>
</ol>
<p>Example interaction with an AI assistant:</p>
<pre><code>You: "What datasets are available in this R session?"
AI: *Lists resources and reads relevant ones*
    "I can see you have the iris dataset available. Based on the
    /data/iris-summary resource, it has 150 observations of 5 variables..."

You: "Can you help me analyze the relationship between Sepal.Length and Petal.Length?"
AI: *Reads the iris summary resource for context*
    "Based on the iris dataset summary, I can see that Sepal.Length ranges
    from 4.3 to 7.9 and Petal.Length from 1.0 to 6.9. Let me create a
    linear model to analyze their relationship..."</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="advanced-usage">Advanced Usage<a class="anchor" aria-label="anchor" href="#advanced-usage"></a>
</h2>
<div class="section level3">
<h3 id="customizing-mcp-path">Customizing MCP Path<a class="anchor" aria-label="anchor" href="#customizing-mcp-path"></a>
</h3>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"http"</span>, path <span class="op">=</span> <span class="st">"/my-mcp-server"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="filtering-endpoints">Filtering Endpoints<a class="anchor" aria-label="anchor" href="#filtering-endpoints"></a>
</h3>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Include only specific endpoints</span></span>
<span><span class="va">my_pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"http"</span>, include_endpoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GET__echo"</span>, <span class="st">"POST__add"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Exclude specific endpoints</span></span>
<span><span class="va">my_pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span>, exclude_endpoints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POST__internal"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="custom-server-info">Custom Server Info<a class="anchor" aria-label="anchor" href="#custom-server-info"></a>
</h3>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span></span>
<span>  transport <span class="op">=</span> <span class="st">"http"</span>,</span>
<span>  server_name <span class="op">=</span> <span class="st">"my-api-mcp"</span>,</span>
<span>  server_version <span class="op">=</span> <span class="st">"1.0.0"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="complete-example">Complete Example<a class="anchor" aria-label="anchor" href="#complete-example"></a>
</h2>
<p>Here’s a step-by-step example of creating an MCP-enabled API:</p>
<ol style="list-style-type: decimal">
<li>Create a Plumber API file (<code>my_api.R</code>):</li>
</ol>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#* @apiTitle My MCP-Enabled API</span></span>
<span><span class="co">#* @apiDescription API with MCP support for AI assistants</span></span>
<span></span>
<span><span class="co">#* Get current time</span></span>
<span><span class="co">#* @get /time</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#* Calculate factorial</span></span>
<span><span class="co">#* @param n Integer to calculate factorial</span></span>
<span><span class="co">#* @post /factorial</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">n</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"n must be non-negative"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>result <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Special.html" class="external-link">factorial</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Create and run the server:</li>
</ol>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rplumber.io" class="external-link">plumber</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">plumber2mcp</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="st">"my_api.R"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"http"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.rplumber.io/reference/pr_run.html" class="external-link">pr_run</a></span><span class="op">(</span>port <span class="op">=</span> <span class="fl">8000</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Your API is now accessible:
<ul>
<li>HTTP API: <code>http://localhost:8000/</code>
</li>
<li>MCP endpoint: <code>http://localhost:8000/mcp</code>
</li>
<li>API documentation: <code>http://localhost:8000/__docs__/</code>
</li>
</ul>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h2>
<p>Run the example server:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/run_mcp_server.R"</span>, package <span class="op">=</span> <span class="st">"plumber2mcp"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Test with the MCP client:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/test_mcp_client.R"</span>, package <span class="op">=</span> <span class="st">"plumber2mcp"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-with-ai-assistants">Using with AI Assistants<a class="anchor" aria-label="anchor" href="#using-with-ai-assistants"></a>
</h2>
<p>Once your MCP server is running, you can configure AI assistants to use it:</p>
<div class="section level3">
<h3 id="claude-desktop">Claude Desktop<a class="anchor" aria-label="anchor" href="#claude-desktop"></a>
</h3>
<p>Add to your Claude configuration file:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>  <span class="dt">"mcpServers"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>    <span class="dt">"my-r-api"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"http://localhost:8000/mcp"</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="other-ai-assistants">Other AI Assistants<a class="anchor" aria-label="anchor" href="#other-ai-assistants"></a>
</h3>
<p>Check your AI assistant’s documentation for MCP configuration instructions.</p>
</div>
</div>
<div class="section level2">
<h2 id="mcp-protocol-details">MCP Protocol Details<a class="anchor" aria-label="anchor" href="#mcp-protocol-details"></a>
</h2>
<p>This package implements the <a href="https://modelcontextprotocol.io/" class="external-link">Model Context Protocol</a> specification. The MCP endpoints handle:</p>
<ul>
<li>
<strong>Tool Discovery</strong>: Lists all available Plumber endpoints as MCP tools</li>
<li>
<strong>Tool Execution</strong>: Converts MCP tool calls to Plumber endpoint requests</li>
<li>
<strong>Error Handling</strong>: Properly formats errors in MCP response format</li>
</ul>
</div>
<div class="section level2">
<h2 id="testing-with-mcp-inspector">Testing with MCP Inspector<a class="anchor" aria-label="anchor" href="#testing-with-mcp-inspector"></a>
</h2>
<p><a href="https://github.com/modelcontextprotocol/inspector" class="external-link">MCP Inspector</a> is a tool for testing and debugging MCP servers.</p>
<div class="section level3">
<h3 id="using-mcp-inspector-with-http-transport">Using MCP Inspector with HTTP Transport<a class="anchor" aria-label="anchor" href="#using-mcp-inspector-with-http-transport"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Start your plumber API with HTTP transport:</li>
</ol>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rplumber.io" class="external-link">plumber</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">plumber2mcp</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://www.rplumber.io/reference/pr.html" class="external-link">pr</a></span><span class="op">(</span><span class="st">"api.R"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"http"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://www.rplumber.io/reference/pr_run.html" class="external-link">pr_run</a></span><span class="op">(</span>port <span class="op">=</span> <span class="fl">8000</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>In a new terminal, navigate to the examples directory:</li>
</ol>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="bu">cd</span> /path/to/plumber2mcp/inst/examples</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="ex">mcp-inspector</span> <span class="at">--config</span> http_wrapper_config.json <span class="at">--server</span> plumber2mcp</span></code></pre></div>
<p>The <code>stdio-wrapper.py</code> script bridges MCP Inspector’s stdio interface to your HTTP server.</p>
</div>
<div class="section level3">
<h3 id="using-mcp-inspector-with-stdio-transport">Using MCP Inspector with Stdio Transport<a class="anchor" aria-label="anchor" href="#using-mcp-inspector-with-stdio-transport"></a>
</h3>
<p>Use the stdio configuration directly:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="bu">cd</span> /path/to/plumber2mcp/inst/examples</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="ex">mcp-inspector</span> <span class="at">--config</span> stdio_config.json <span class="at">--server</span> plumber2mcp</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<div class="section level3">
<h3 id="common-issues">Common Issues<a class="anchor" aria-label="anchor" href="#common-issues"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Port already in use</strong>: Change the port number in <code>pr_run(port = 8001)</code>
</li>
<li>
<strong>MCP endpoint not found</strong>: Ensure you called <code><a href="reference/pr_mcp.html">pr_mcp()</a></code> before <code><a href="https://www.rplumber.io/reference/pr_run.html" class="external-link">pr_run()</a></code>
</li>
<li>
<strong>Tools not showing up</strong>: Check that your Plumber endpoints have proper annotations</li>
<li>
<strong>MCP Inspector connection error</strong>:
<ul>
<li>For HTTP: Ensure the server is running on port 8000 before starting MCP Inspector</li>
<li>Check that the <code>cwd</code> path in config files points to the correct directory</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="debug-mode">Debug Mode<a class="anchor" aria-label="anchor" href="#debug-mode"></a>
</h3>
<p>Enable verbose logging:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For stdio transport</span></span>
<span><span class="va">my_pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"stdio"</span>, debug <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For HTTP transport (debug not available)</span></span>
<span><span class="va">my_pr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="reference/pr_mcp.html">pr_mcp</a></span><span class="op">(</span>transport <span class="op">=</span> <span class="st">"http"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://www.rplumber.io/reference/pr_run.html" class="external-link">pr_run</a></span><span class="op">(</span>port <span class="op">=</span> <span class="fl">8000</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Contributions are welcome! Please file issues and pull requests on GitHub.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing plumber2mcp</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/armish" class="external-link">Bulent Arman Aksoy</a> <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/armish/plumber2mcp/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/armish/plumber2mcp/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/armish/plumber2mcp?branch=main" class="external-link"><img src="https://codecov.io/gh/armish/plumber2mcp/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/armish" class="external-link">Bulent Arman Aksoy</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> and the <a href="https://modelcontextprotocol.io/" class="external-link">Model Context Protocol</a></p>
</div>

    </footer>
</div>





  </body>
</html>
